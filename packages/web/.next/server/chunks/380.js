"use strict";exports.id=380,exports.ids=[380],exports.modules={62367:(e,s,t)=>{t.d(s,{Y:()=>x});var l=t(13486),a=t(60159),r=t(23365),n=t(59203),i=t(31461),c=t(63821),d=t(86e3),o=t(29563),m=t(74941);function x({transferId:e,onRefresh:s,autoRefresh:t=!0,refreshInterval:x=5e3}){let[u,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(!0),[f,b]=(0,a.useState)(null),[j,N]=(0,a.useState)(new Date),[y,v]=(0,a.useState)(!1),w=async(s=!0)=>{try{s&&p(!0),b(null);let t=await fetch(`http://localhost:4000/api/transfers/${e}/status`);if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to fetch transfer status")}let l=await t.json();h(l),N(new Date),v(!0)}catch(e){console.error("Transfer status fetch error:",e),b(e instanceof Error?e.message:"Failed to fetch transfer status"),v(!1)}finally{s&&p(!1)}},k=()=>{w(!0),s&&s()},A=(e,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),C=e=>new Date(e).toLocaleString(),$=e=>{switch(e){case"success":return{color:"text-green-600",icon:c.A};case"pending":return{color:"text-yellow-600",icon:r.A};case"failed":return{color:"text-red-600",icon:d.A};default:return{color:"text-gray-600",icon:r.A}}};if(g&&!u)return(0,l.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,l.jsxs)(o.Wu,{className:"flex items-center justify-center py-8",children:[(0,l.jsx)(n.A,{className:"h-6 w-6 animate-spin text-muted-foreground mr-2"}),(0,l.jsx)("span",{className:"text-muted-foreground",children:"Loading transfer status..."})]})});if(f&&!u)return(0,l.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,l.jsx)(o.Wu,{className:"py-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Error Loading Transfer"}),(0,l.jsx)("p",{className:"text-red-600 mb-4",children:f}),(0,l.jsxs)(m.$,{onClick:k,variant:"outline",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})});if(!u)return(0,l.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,l.jsx)(o.Wu,{className:"py-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Transfer Not Found"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["No transfer data available for ID: ",e]})]})})});let D=(e=>{switch(e){case"initiated":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:r.A,label:"Initiated"};case"payment_processing":return{color:"text-yellow-600",bgColor:"bg-yellow-50",icon:n.A,label:"Processing Payment"};case"transferring":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:i.A,label:"Transferring"};case"paying_out":return{color:"text-purple-600",bgColor:"bg-purple-50",icon:n.A,label:"Paying Out"};case"completed":return{color:"text-green-600",bgColor:"bg-green-50",icon:c.A,label:"Completed"};case"failed":return{color:"text-red-600",bgColor:"bg-red-50",icon:d.A,label:"Failed"};case"chilean_bank_processing":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.A,label:"Processing Chilean Bank Transfer"};case"chilean_verification_pending":return{color:"text-yellow-600",bgColor:"bg-yellow-50",icon:r.A,label:"Awaiting Bank Verification"};case"chilean_microdeposit_sent":return{color:"text-purple-600",bgColor:"bg-purple-50",icon:i.A,label:"Microdeposits Sent"};default:return{color:"text-gray-600",bgColor:"bg-gray-50",icon:r.A,label:"Unknown"}}})(u.status),S=D.icon,_=(e=>{switch(e){case"initiated":return 20;case"payment_processing":return 40;case"transferring":return 60;case"paying_out":return 80;case"completed":return 100;case"failed":default:return 0;case"chilean_bank_processing":return 50;case"chilean_verification_pending":return 30;case"chilean_microdeposit_sent":return 70}})(u.status);return(0,l.jsxs)(o.Zp,{className:"w-full max-w-2xl mx-auto shadow-sm",children:[(0,l.jsxs)(o.aR,{className:"pb-4",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,l.jsxs)(o.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,l.jsx)(S,{className:`h-5 w-5 ${D.color}`}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Transfer Status"}),(0,l.jsx)("span",{className:"sm:hidden",children:"Status"})]}),(0,l.jsxs)(m.$,{onClick:k,variant:"outline",size:"sm",disabled:g,className:"self-start sm:self-auto",children:[(0,l.jsx)(n.A,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Refresh"}),(0,l.jsx)("span",{className:"sm:hidden",children:"Update"})]})]}),(0,l.jsxs)("div",{className:"text-sm text-muted-foreground break-all sm:break-normal",children:["ID: ",u.transferId]})]}),(0,l.jsxs)(o.Wu,{className:"space-y-6",children:[(0,l.jsx)("div",{className:`rounded-lg p-4 ${D.bgColor}`,children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(S,{className:`h-6 w-6 ${D.color}`}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:`font-semibold ${D.color}`,children:D.label}),u.estimatedCompletion&&"completed"!==u.status&&(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Estimated completion: ",C(u.estimatedCompletion)]}),u.completedAt&&(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Completed: ",C(u.completedAt)]})]})]})})}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,l.jsx)("span",{children:"Progress"}),(0,l.jsxs)("span",{children:[_,"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:`h-2 rounded-full transition-all duration-500 ${"failed"===u.status?"bg-red-500":"bg-blue-500"}`,style:{width:`${_}%`}})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"You sent"}),(0,l.jsx)("p",{className:"font-semibold",children:A(u.sendAmount,u.sendCurrency||"USD")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recipient gets"}),(0,l.jsx)("p",{className:"font-semibold text-green-600",children:A(u.receiveAmount,u.receiveCurrency||"EUR")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exchange rate"}),(0,l.jsx)("p",{className:"font-semibold",children:u.sendCurrency===u.receiveCurrency?"1:1 (Same currency)":`1 ${u.sendCurrency||"USD"} = ${u.exchangeRate.toFixed(4)} ${u.receiveCurrency||"EUR"}`})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fees"}),(0,l.jsx)("p",{className:"font-semibold",children:A(u.fees,u.sendCurrency||"USD")})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Timeline"}),y&&(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[(0,l.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live updates"]})]}),(0,l.jsx)("div",{className:"relative",children:0===u.timeline.length?(0,l.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,l.jsx)(r.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{children:"No timeline events yet"})]}):(0,l.jsx)("div",{className:"space-y-4",children:u.timeline.map((e,s)=>{let t=$(e.status),a=t.icon,r=s===u.timeline.length-1,n=new Date(e.timestamp)>new Date(Date.now()-3e5);return(0,l.jsxs)("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all duration-300 ${n?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:[(0,l.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,l.jsx)("div",{className:`p-1 rounded-full ${"success"===e.status?"bg-green-100":"pending"===e.status?"bg-yellow-100":"bg-red-100"}`,children:(0,l.jsx)(a,{className:`h-4 w-4 ${t.color}`})}),!r&&(0,l.jsx)("div",{className:`w-px h-8 mt-2 ${"success"===e.status?"bg-green-300":"bg-gray-300"}`})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[(0,l.jsx)("p",{className:"font-medium text-sm sm:text-base",children:e.message}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[n&&(0,l.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"New"}),(0,l.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:C(e.timestamp)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,l.jsx)("p",{className:`text-xs capitalize font-medium ${t.color}`,children:e.status}),e.metadata&&Object.keys(e.metadata).length>0&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:"• Additional details available"})]})]})]},e.id)})})})]}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground text-center border-t pt-4",children:["Last updated: ",C(u.lastUpdated),t&&"completed"!==u.status&&"failed"!==u.status&&(0,l.jsxs)("span",{className:"ml-2",children:["• Auto-refreshing every ",x/1e3,"s"]})]})]})]})}},93858:(e,s,t)=>{t.d(s,{Z:()=>d});var l=t(13486),a=t(68551),r=t(57956),n=t(97493),i=t(63821);let c=[{key:"calculator",label:"Calculate",shortLabel:"Calc",icon:a.A,description:"Enter transfer amount"},{key:"recipient",label:"Recipient",shortLabel:"Recipient",icon:r.A,description:"Add recipient details"},{key:"payment",label:"Payment",shortLabel:"Pay",icon:n.A,description:"Complete payment"},{key:"status",label:"Status",shortLabel:"Status",icon:i.A,description:"Track transfer"}];function d({currentStep:e,completedSteps:s,onStepClick:t}){let a=c.findIndex(s=>s.key===e),r=(t,l)=>s.includes(t.key)?"completed":t.key===e?"current":l<a?"completed":"upcoming",n=(e,s)=>{let t="relative flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-200",l=s?"cursor-pointer hover:scale-105":"";switch(e){case"completed":return`${t} ${l} bg-green-500 border-green-500 text-white`;case"current":return`${t} ${l} bg-blue-500 border-blue-500 text-white ring-4 ring-blue-100`;default:return`${t} bg-gray-100 border-gray-300 text-gray-400`}},d=e=>{let t=e<a||s.includes(c[e].key);return`flex-1 h-0.5 mx-2 transition-colors duration-300 ${t?"bg-green-500":"bg-gray-300"}`},o=l=>{t&&(s.includes(l.key)||l.key===e)&&t(l.key)};return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:c.map((t,a)=>{let m=r(t,a),x=s.includes(t.key)||t.key===e,u=t.icon;return(0,l.jsxs)("div",{className:"flex items-center flex-1",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:n(m,x),onClick:()=>o(t),role:x?"button":void 0,tabIndex:x?0:void 0,onKeyDown:e=>{x&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(t))},children:"completed"===m?(0,l.jsx)(i.A,{className:"w-5 h-5"}):(0,l.jsx)(u,{className:"w-5 h-5"})}),(0,l.jsxs)("div",{className:"mt-2 text-center",children:[(0,l.jsx)("div",{className:`text-sm font-medium ${"current"===m?"text-blue-600":"completed"===m?"text-green-600":"text-gray-500"}`,children:t.label}),(0,l.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:t.description})]})]}),a<c.length-1&&(0,l.jsx)("div",{className:d(a)})]},t.key)})})}),(0,l.jsxs)("div",{className:"md:hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4",children:c.map((t,d)=>{let m=r(t,d),x=s.includes(t.key)||t.key===e,u=t.icon;return(0,l.jsxs)("div",{className:"flex items-center flex-1",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:n(m,x),onClick:()=>o(t),role:x?"button":void 0,tabIndex:x?0:void 0,onKeyDown:e=>{x&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),o(t))},children:"completed"===m?(0,l.jsx)(i.A,{className:"w-4 h-4"}):(0,l.jsx)(u,{className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"mt-1 text-center",children:(0,l.jsx)("div",{className:`text-xs font-medium ${"current"===m?"text-blue-600":"completed"===m?"text-green-600":"text-gray-500"}`,children:t.shortLabel})})]}),d<c.length-1&&(0,l.jsx)("div",{className:`flex-1 h-0.5 mx-1 ${d<a||s.includes(c[d].key)?"bg-green-500":"bg-gray-300"}`})]},t.key)})}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",a+1," of ",c.length,": ",c[a]?.description]})})]}),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,l.jsx)("span",{children:"Progress"}),(0,l.jsxs)("span",{children:[Math.round((a+1)/c.length*100),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(a+1)/c.length*100}%`}})})]})]})}}};