"use strict";exports.id=959,exports.ids=[959],exports.modules={986:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},15577:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},15998:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},20276:(e,s,a)=>{a.d(s,{E:()=>l});var r=a(13486);a(60159);var t=a(76353),c=a(26518);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return(0,r.jsx)("div",{className:(0,c.cn)(n({variant:s}),e),...a})}},21800:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},57956:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63821:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},67959:(e,s,a)=>{a.d(s,{d:()=>k,n:()=>A});var r=a(13486),t=a(60159),c=a(21232),n=a(86698),l=a(15998),i=a(57956),d=a(63821),m=a(21800);let x=(0,a(84667).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var o=a(97493),h=a(86e3),p=a(15577),u=a(986),j=a(74941),y=a(29563),g=a(23025),v=a(41571),N=a(20276);let f=c.Ik({number:c.Yj().min(13,"Card number must be at least 13 digits").max(19,"Card number cannot exceed 19 digits"),expiryMonth:c.ai().min(1,"Invalid month").max(12,"Invalid month"),expiryYear:c.ai().min(new Date().getFullYear(),"Card has expired").max(new Date().getFullYear()+20,"Invalid year"),cvv:c.Yj().min(3,"CVV must be at least 3 digits").max(4,"CVV cannot exceed 4 digits")}),b=c.Ik({cardDetails:f});function A({sendAmount:e,receiveAmount:s,exchangeRate:a,fees:A,rateId:k,onSubmit:w,isLoading:D=!1,transferData:C,recipientUser:F,selectedPaymentMethod:I,onSuccess:Y,onBack:M,onError:S}){let $=!!(C&&F&&I),B=C||{sendAmount:e,receiveAmount:s,sendCurrency:"USD",receiveCurrency:"EUR",exchangeRate:a,fees:A,rateId:k,rateValidUntil:"",calculatorMode:"send",breakdown:{sendAmountUSD:e,fees:{cardProcessing:0,transfer:0,payout:0,total:A},netAmountUSD:e-A,exchangeRate:a,receiveAmount:s},estimatedArrival:""},[E,J]=(0,t.useState)({number:"",expiryMonth:1,expiryYear:new Date().getFullYear(),cvv:""}),[T,V]=(0,t.useState)({name:"",email:"",bankAccount:{iban:"",bic:"",bankName:"",accountHolderName:"",country:"DE"}}),[P,R]=(0,t.useState)({}),[U,Z]=(0,t.useState)(!1),z=e=>{let s=e.replace(/\s/g,"").replace(/[^0-9]/gi,""),a=s.match(/\d{4,16}/g),r=a&&a[0]||"",t=[];for(let e=0,s=r.length;e<s;e+=4)t.push(r.substring(e,e+4));return t.length?t.join(" "):s},H=(e,s)=>{J(a=>({...a,[e]:s})),P[`cardDetails.${e}`]&&R(s=>{let a={...s};return delete a[`cardDetails.${e}`],a})},L=(e,s)=>{if(e.startsWith("bankAccount.")){let a=e.replace("bankAccount.","");V(e=>({...e,bankAccount:{...e.bankAccount,[a]:s}}))}else V(a=>({...a,[e]:s}));P[`recipientInfo.${e}`]&&R(s=>{let a={...s};return delete a[`recipientInfo.${e}`],a})},W=async()=>"mock-token",O=async e=>{e.preventDefault(),R({}),Z(!0);try{if($){let e={cardDetails:{...E,number:E.number.replace(/\s/g,"")}};b.parse(e);let s=await fetch("http://localhost:4000/api/transfers/create-user-to-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await W()}`},body:JSON.stringify({sendAmount:B.sendAmount,sendCurrency:B.sendCurrency,receiveCurrency:B.receiveCurrency,rateId:B.rateId,cardDetails:e.cardDetails,recipientUserId:F.id,recipientPaymentMethodId:I.id})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Failed to create transfer")}let a=await s.json();Y&&Y(a.transferId)}else{let e={cardDetails:{...E,number:E.number.replace(/\s/g,"")},recipientInfo:{...T,bankAccount:{...T.bankAccount,iban:T.bankAccount.iban.replace(/\s/g,"")}}};c.Ik({cardDetails:f,recipientInfo:c.Ik({name:c.Yj().min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),email:c.Yj().email("Invalid email address"),bankAccount:c.Ik({iban:c.Yj().min(15,"IBAN must be at least 15 characters").max(34,"IBAN cannot exceed 34 characters"),bic:c.Yj().min(8,"BIC must be at least 8 characters").max(11,"BIC cannot exceed 11 characters"),bankName:c.Yj().min(2,"Bank name must be at least 2 characters").max(100,"Bank name cannot exceed 100 characters"),accountHolderName:c.Yj().min(2,"Account holder name must be at least 2 characters").max(100,"Account holder name cannot exceed 100 characters"),country:c.eu("DE").refine(()=>!0,{message:"Only German bank accounts are supported"})})})}).parse(e),w(e)}}catch(e){if(console.error("Transfer creation error:",e),e instanceof n.G){let s={};e.issues.forEach(e=>{s[e.path.join(".")]=e.message}),R(s)}else{let s=e instanceof Error?e.message:"Failed to create transfer";S&&S(s)}}finally{Z(!1)}},G=B.sendAmount+B.fees;return $?(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[M&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(j.$,{variant:"outline",onClick:M,disabled:D||U,className:"flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),"Back"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Complete Payment"}),(0,r.jsx)("div",{})," "]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsx)(y.aR,{children:(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(i.A,{className:"h-5 w-5"}),"Transfer Summary"]})}),(0,r.jsxs)(y.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"From"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"You"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Sending via card payment"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"To"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[F.profileImageUrl?(0,r.jsx)("img",{src:F.profileImageUrl,alt:F.fullName,className:"w-10 h-10 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("p",{className:"font-medium",children:F.fullName}),F.isVerified&&(0,r.jsx)(d.A,{className:"w-4 h-4 text-green-500"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,r.jsx)(m.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:F.email})]})]})]})]})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"You Send"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[B.sendAmount.toFixed(2)," ",B.sendCurrency]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["+ ",B.fees.toFixed(2)," ",B.sendCurrency," fees"]}),(0,r.jsxs)("div",{className:"text-lg font-semibold border-t pt-2",children:["Total: ",G.toFixed(2)," ",B.sendCurrency]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"They Receive"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[B.receiveAmount.toFixed(2)," ",B.receiveCurrency]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Exchange rate: 1 ",B.sendCurrency," = ",B.exchangeRate.toFixed(4)," ",B.receiveCurrency]}),B.estimatedArrival&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Estimated arrival: ",B.estimatedArrival]})]})]})})]})]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{className:"h-5 w-5"}),"Recipient's Bank Account"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[F.fullName," will receive the money in their verified account"]})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium",children:I.bankName||`${I.type.replace("_"," ")}`}),(0,r.jsx)(N.E,{variant:"secondary",className:"text-xs",children:I.currency}),I.isDefault&&(0,r.jsx)(N.E,{variant:"outline",className:"text-xs",children:"Default"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[I.accountType," • ",I.country,I.lastFourDigits&&(0,r.jsxs)("span",{children:[" • ****",I.lastFourDigits]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Verified ",new Date(I.verifiedAt).toLocaleDateString()]})]}),(0,r.jsx)(d.A,{className:"w-5 h-5 text-green-500"})]})})]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5"}),"Your Payment Method"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your card details to complete the transfer"})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsxs)("form",{onSubmit:O,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"card-number",children:"Card Number"}),(0,r.jsx)(g.p,{id:"card-number",type:"text",placeholder:"1234 5678 9012 3456",value:z(E.number),onChange:e=>H("number",e.target.value.replace(/\s/g,"")),className:P["cardDetails.number"]?"border-red-500":"",maxLength:19}),P["cardDetails.number"]&&(0,r.jsxs)("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-3 w-3"}),P["cardDetails.number"]]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-month",children:"Month"}),(0,r.jsx)(g.p,{id:"expiry-month",type:"number",placeholder:"MM",min:"1",max:"12",value:E.expiryMonth,onChange:e=>H("expiryMonth",parseInt(e.target.value)||1),className:P["cardDetails.expiryMonth"]?"border-red-500":""}),P["cardDetails.expiryMonth"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.expiryMonth"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-year",children:"Year"}),(0,r.jsx)(g.p,{id:"expiry-year",type:"number",placeholder:"YYYY",min:new Date().getFullYear(),max:new Date().getFullYear()+20,value:E.expiryYear,onChange:e=>H("expiryYear",parseInt(e.target.value)||new Date().getFullYear()),className:P["cardDetails.expiryYear"]?"border-red-500":""}),P["cardDetails.expiryYear"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.expiryYear"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"cvv",children:"CVV"}),(0,r.jsx)(g.p,{id:"cvv",type:"text",placeholder:"123",maxLength:4,value:E.cvv,onChange:e=>H("cvv",e.target.value.replace(/[^0-9]/g,"")),className:P["cardDetails.cvv"]?"border-red-500":""}),P["cardDetails.cvv"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.cvv"]})]})]})]}),(0,r.jsx)(j.$,{type:"submit",disabled:D||U,className:"w-full",size:"lg",children:D||U?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Transfer..."]}):`Send ${G.toFixed(2)} ${B.sendCurrency} to ${F.fullName}`}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Secured by Circle • PCI DSS Compliant"})]})]})})]})]}):(0,r.jsxs)(y.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5"}),"Complete Your Transfer"]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"You send:"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",B.sendAmount.toFixed(2)," ",B.sendCurrency]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Fees:"}),(0,r.jsxs)("span",{className:"font-medium",children:["$",B.fees.toFixed(2)," ",B.sendCurrency]})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t pt-1 mt-1",children:[(0,r.jsx)("span",{children:"Total to pay:"}),(0,r.jsxs)("span",{className:"font-bold",children:["$",G.toFixed(2)," ",B.sendCurrency]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,r.jsx)("span",{children:"Recipient gets:"}),(0,r.jsxs)("span",{className:"font-bold",children:["€",B.receiveAmount.toFixed(2)," ",B.receiveCurrency]})]})]})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsxs)("form",{onSubmit:O,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Payment Details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"card-number",children:"Card Number"}),(0,r.jsx)(g.p,{id:"card-number",type:"text",placeholder:"1234 5678 9012 3456",value:z(E.number),onChange:e=>H("number",e.target.value.replace(/\s/g,"")),className:P["cardDetails.number"]?"border-red-500":"",maxLength:19}),P["cardDetails.number"]&&(0,r.jsxs)("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-3 w-3"}),P["cardDetails.number"]]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-month",children:"Month"}),(0,r.jsx)(g.p,{id:"expiry-month",type:"number",placeholder:"MM",min:"1",max:"12",value:E.expiryMonth,onChange:e=>H("expiryMonth",parseInt(e.target.value)||1),className:P["cardDetails.expiryMonth"]?"border-red-500":""}),P["cardDetails.expiryMonth"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.expiryMonth"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-year",children:"Year"}),(0,r.jsx)(g.p,{id:"expiry-year",type:"number",placeholder:"YYYY",min:new Date().getFullYear(),max:new Date().getFullYear()+20,value:E.expiryYear,onChange:e=>H("expiryYear",parseInt(e.target.value)||new Date().getFullYear()),className:P["cardDetails.expiryYear"]?"border-red-500":""}),P["cardDetails.expiryYear"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.expiryYear"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"cvv",children:"CVV"}),(0,r.jsx)(g.p,{id:"cvv",type:"text",placeholder:"123",maxLength:4,value:E.cvv,onChange:e=>H("cvv",e.target.value.replace(/[^0-9]/g,"")),className:P["cardDetails.cvv"]?"border-red-500":""}),P["cardDetails.cvv"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["cardDetails.cvv"]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Recipient Information"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"recipient-name",children:"Full Name"}),(0,r.jsx)(g.p,{id:"recipient-name",type:"text",placeholder:"John Doe",value:T.name,onChange:e=>L("name",e.target.value),className:P["recipientInfo.name"]?"border-red-500":""}),P["recipientInfo.name"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.name"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"recipient-email",children:"Email Address"}),(0,r.jsx)(g.p,{id:"recipient-email",type:"email",placeholder:"john@example.com",value:T.email,onChange:e=>L("email",e.target.value),className:P["recipientInfo.email"]?"border-red-500":""}),P["recipientInfo.email"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.email"]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(x,{className:"h-4 w-4"}),(0,r.jsx)("h3",{className:"font-semibold",children:"Bank Account Details (Germany)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"iban",children:"IBAN"}),(0,r.jsx)(g.p,{id:"iban",type:"text",placeholder:"DE89 3704 0044 0532 0130 00",value:T.bankAccount.iban.replace(/\s/g,"").toUpperCase().replace(/(.{4})/g,"$1 ").trim(),onChange:e=>L("bankAccount.iban",e.target.value.replace(/\s/g,"")),className:P["recipientInfo.bankAccount.iban"]?"border-red-500":""}),P["recipientInfo.bankAccount.iban"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.bankAccount.iban"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"bic",children:"BIC/SWIFT Code"}),(0,r.jsx)(g.p,{id:"bic",type:"text",placeholder:"COBADEFFXXX",value:T.bankAccount.bic,onChange:e=>L("bankAccount.bic",e.target.value.toUpperCase()),className:P["recipientInfo.bankAccount.bic"]?"border-red-500":""}),P["recipientInfo.bankAccount.bic"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.bankAccount.bic"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"bank-name",children:"Bank Name"}),(0,r.jsx)(g.p,{id:"bank-name",type:"text",placeholder:"Deutsche Bank",value:T.bankAccount.bankName,onChange:e=>L("bankAccount.bankName",e.target.value),className:P["recipientInfo.bankAccount.bankName"]?"border-red-500":""}),P["recipientInfo.bankAccount.bankName"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.bankAccount.bankName"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"account-holder",children:"Account Holder Name"}),(0,r.jsx)(g.p,{id:"account-holder",type:"text",placeholder:"John Doe",value:T.bankAccount.accountHolderName,onChange:e=>L("bankAccount.accountHolderName",e.target.value),className:P["recipientInfo.bankAccount.accountHolderName"]?"border-red-500":""}),P["recipientInfo.bankAccount.accountHolderName"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:P["recipientInfo.bankAccount.accountHolderName"]})]})]})]}),(0,r.jsx)(j.$,{type:"submit",disabled:D||U,className:"w-full",size:"lg",children:D||U?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Transfer..."]}):`Send ${B.sendAmount.toFixed(2)} USD`}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Secured by Circle • PCI DSS Compliant"})]})]})})]})}function k({transferData:e,recipientUser:s,selectedPaymentMethod:a,onSuccess:c,onBack:f,onError:A,isLoading:k=!1}){let[w,D]=(0,t.useState)({number:"",expiryMonth:1,expiryYear:new Date().getFullYear(),cvv:""}),[C,F]=(0,t.useState)({}),[I,Y]=(0,t.useState)(!1),M=(e,s)=>{D(a=>({...a,[e]:s})),C[`cardDetails.${e}`]&&F(s=>{let a={...s};return delete a[`cardDetails.${e}`],a})},S=async r=>{r.preventDefault(),F({}),Y(!0);try{let r={cardDetails:{...w,number:w.number.replace(/\s/g,"")}};b.parse(r);let t=await fetch("http://localhost:4000/api/transfers/create-user-to-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await $()}`},body:JSON.stringify({sendAmount:e.sendAmount,sendCurrency:e.sendCurrency,receiveCurrency:e.receiveCurrency,rateId:e.rateId,cardDetails:r.cardDetails,recipientUserId:s.id,recipientPaymentMethodId:a.id})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to create transfer")}let n=await t.json();c(n.transferId)}catch(e){if(console.error("Transfer creation error:",e),e instanceof n.G){let s={};e.issues.forEach(e=>{s[e.path.join(".")]=e.message}),F(s)}else A(e instanceof Error?e.message:"Failed to create transfer")}finally{Y(!1)}},$=async()=>"mock-token",B=e.sendAmount+e.fees;return(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(j.$,{variant:"outline",onClick:f,disabled:k||I,className:"flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),"Back"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Complete Payment"}),(0,r.jsx)("div",{})," "]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsx)(y.aR,{children:(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(i.A,{className:"h-5 w-5"}),"Transfer Summary"]})}),(0,r.jsxs)(y.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"From"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"You"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Sending via card payment"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"To"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[s.profileImageUrl?(0,r.jsx)("img",{src:s.profileImageUrl,alt:s.fullName,className:"w-10 h-10 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("p",{className:"font-medium",children:s.fullName}),s.isVerified&&(0,r.jsx)(d.A,{className:"w-4 h-4 text-green-500"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,r.jsx)(m.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:s.email})]})]})]})]})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"You Send"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[e.sendAmount.toFixed(2)," ",e.sendCurrency]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["+ ",e.fees.toFixed(2)," ",e.sendCurrency," fees"]}),(0,r.jsxs)("div",{className:"text-lg font-semibold border-t pt-2",children:["Total: ",B.toFixed(2)," ",e.sendCurrency]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-600 uppercase tracking-wide",children:"They Receive"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[e.receiveAmount.toFixed(2)," ",e.receiveCurrency]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Exchange rate: 1 ",e.sendCurrency," = ",e.exchangeRate.toFixed(4)," ",e.receiveCurrency]}),e.estimatedArrival&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Estimated arrival: ",e.estimatedArrival]})]})]})})]})]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{className:"h-5 w-5"}),"Recipient's Bank Account"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[s.fullName," will receive the money in their verified account"]})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)(o.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium",children:a.bankName||`${a.type.replace("_"," ")}`}),(0,r.jsx)(N.E,{variant:"secondary",className:"text-xs",children:a.currency}),a.isDefault&&(0,r.jsx)(N.E,{variant:"outline",className:"text-xs",children:"Default"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[a.accountType," • ",a.country,a.lastFourDigits&&(0,r.jsxs)("span",{children:[" • ****",a.lastFourDigits]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Verified ",new Date(a.verifiedAt).toLocaleDateString()]})]}),(0,r.jsx)(d.A,{className:"w-5 h-5 text-green-500"})]})})]}),(0,r.jsxs)(y.Zp,{children:[(0,r.jsxs)(y.aR,{children:[(0,r.jsxs)(y.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5"}),"Your Payment Method"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your card details to complete the transfer"})]}),(0,r.jsx)(y.Wu,{children:(0,r.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"card-number",children:"Card Number"}),(0,r.jsx)(g.p,{id:"card-number",type:"text",placeholder:"1234 5678 9012 3456",value:(e=>{let s=e.replace(/\s/g,"").replace(/[^0-9]/gi,""),a=s.match(/\d{4,16}/g),r=a&&a[0]||"",t=[];for(let e=0,s=r.length;e<s;e+=4)t.push(r.substring(e,e+4));return t.length?t.join(" "):s})(w.number),onChange:e=>M("number",e.target.value.replace(/\s/g,"")),className:C["cardDetails.number"]?"border-red-500":"",maxLength:19}),C["cardDetails.number"]&&(0,r.jsxs)("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-3 w-3"}),C["cardDetails.number"]]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-month",children:"Month"}),(0,r.jsx)(g.p,{id:"expiry-month",type:"number",placeholder:"MM",min:"1",max:"12",value:w.expiryMonth,onChange:e=>M("expiryMonth",parseInt(e.target.value)||1),className:C["cardDetails.expiryMonth"]?"border-red-500":""}),C["cardDetails.expiryMonth"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:C["cardDetails.expiryMonth"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"expiry-year",children:"Year"}),(0,r.jsx)(g.p,{id:"expiry-year",type:"number",placeholder:"YYYY",min:new Date().getFullYear(),max:new Date().getFullYear()+20,value:w.expiryYear,onChange:e=>M("expiryYear",parseInt(e.target.value)||new Date().getFullYear()),className:C["cardDetails.expiryYear"]?"border-red-500":""}),C["cardDetails.expiryYear"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:C["cardDetails.expiryYear"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.J,{htmlFor:"cvv",children:"CVV"}),(0,r.jsx)(g.p,{id:"cvv",type:"text",placeholder:"123",maxLength:4,value:w.cvv,onChange:e=>M("cvv",e.target.value.replace(/[^0-9]/g,"")),className:C["cardDetails.cvv"]?"border-red-500":""}),C["cardDetails.cvv"]&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:C["cardDetails.cvv"]})]})]})]}),(0,r.jsx)(j.$,{type:"submit",disabled:k||I,className:"w-full",size:"lg",children:k||I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Transfer..."]}):`Send ${B.toFixed(2)} ${e.sendCurrency} to ${s.fullName}`}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Secured by Circle • PCI DSS Compliant"})]})]})})]})]})}},97493:(e,s,a)=>{a.d(s,{A:()=>r});let r=(0,a(84667).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}};