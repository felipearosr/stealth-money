"use strict";exports.id=541,exports.ids=[541],exports.modules={6782:(e,a,s)=>{s.d(a,{A:()=>S});var t=s(13486),n=s(60159),r=s(76123),l=s(29563),i=s(74941),c=s(23025),o=s(41571),d=s(86629),m=s(20276),u=s(63821),x=s(86e3),h=s(84667);let p=(0,h.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),f=(0,h.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),b=(0,h.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var y=s(74439),g=s(58350),N=s(97493),j=s(59327),v=s(59203),k=s(23365);function A({account:e,onVerificationComplete:a,onSkip:s}){let{getToken:d}=(0,r.d)(),[h,p]=(0,n.useState)(null),[f,b]=(0,n.useState)(!1),[y,g]=(0,n.useState)(null),[N,A]=(0,n.useState)(null),[w,C]=(0,n.useState)(["",""]),[B,S]=(0,n.useState)("pending"),M=async()=>{b(!0),g(null);try{let a=await d(),s=await fetch(`http://localhost:4000/api/users/me/bank-accounts/${e.id}/verify/micro-deposits`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Failed to start verification")}p("micro_deposits"),S("deposits_sent"),A("Micro-deposits have been sent to your account. They will appear within 1-2 business days.")}catch(e){console.error("Micro-deposit verification error:",e),g(e instanceof Error?e.message:"Failed to start verification")}finally{b(!1)}},X=async()=>{if(!w[0]||!w[1])return void g("Please enter both deposit amounts");b(!0),g(null),S("verifying");try{let s=await d(),t=await fetch(`http://localhost:4000/api/users/me/bank-accounts/${e.id}/verify/micro-deposits/confirm`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({amounts:w.map(e=>parseFloat(e))})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Verification failed")}S("verified"),A("Account verified successfully!"),setTimeout(()=>{a(e.id)},2e3)}catch(e){console.error("Micro-deposit confirmation error:",e),g(e instanceof Error?e.message:"Verification failed"),S("failed")}finally{b(!1)}},T=async()=>{b(!0),g(null);try{A("Instant verification would launch here (Plaid integration)"),setTimeout(()=>{a(e.id)},3e3)}catch(e){console.error("Instant verification error:",e),g("Instant verification is not available for this account")}finally{b(!1)}},F=e=>{switch(e){case"micro_deposits":return{name:"Micro-Deposits",description:"We send small deposits to verify account ownership",icon:(0,t.jsx)(j.A,{className:"h-5 w-5"})};case"instant":return{name:"Instant Verification",description:"Connect securely through your online banking",icon:(0,t.jsx)(u.A,{className:"h-5 w-5"})};default:return{name:"Unknown",description:"Unknown verification method",icon:(0,t.jsx)(x.A,{className:"h-5 w-5"})}}},P=()=>(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(u.A,{className:"h-16 w-16 text-green-500 mx-auto"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-green-700",children:"Account Verified!"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Your ",e.bankName," account has been successfully verified. You can now send and receive money."]}),(0,t.jsxs)(m.E,{className:"bg-green-100 text-green-800",children:["Verified ",e.verificationMethod&&F(e.verificationMethod).name]})]});return(0,t.jsxs)(l.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{className:"flex items-center space-x-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isVerified?(0,t.jsx)(u.A,{className:"h-5 w-5 text-green-500"}):(0,t.jsx)(k.A,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsxs)("span",{children:[e.accountName," (",e.currency,")"]})]})}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.bankName," • ",e.accountHolderName]})]}),(0,t.jsxs)(l.Wu,{className:"space-y-6",children:[y&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-red-700",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Verification Error"})]}),(0,t.jsx)("p",{className:"text-red-600 mt-1",children:y})]}),N&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-700",children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Success"})]}),(0,t.jsx)("p",{className:"text-green-600 mt-1",children:N})]}),e.isVerified?P():"failed"===B?(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(x.A,{className:"h-16 w-16 text-red-500 mx-auto"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-red-700",children:"Verification Failed"}),(0,t.jsx)("p",{className:"text-gray-600",children:"The amounts you entered don't match our records. Please check your account statement and try again."}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Attempts remaining: ",3-e.verificationFailures]}),(0,t.jsxs)("div",{className:"flex space-x-3 justify-center",children:[(0,t.jsx)(i.$,{onClick:()=>{S("deposits_sent"),C(["",""]),g(null)},disabled:e.verificationFailures>=3,children:"Try Again"}),e.verificationFailures>=3&&(0,t.jsx)(i.$,{variant:"outline",onClick:()=>p(null),children:"Choose Different Method"})]})]}):"deposits_sent"===B?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)(u.A,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Micro-Deposits Sent"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["We've sent 2 small deposits to your ",e.bankName," account ending in ",e.accountNumber?.slice(-4)||"****","."]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Check your account statement and enter the exact amounts below."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"deposit1",children:"First Deposit Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,t.jsx)(c.p,{id:"deposit1",type:"number",step:"0.01",min:"0",max:"1",placeholder:"0.XX",className:"pl-8",value:w[0],onChange:e=>C([e.target.value,w[1]])})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"deposit2",children:"Second Deposit Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,t.jsx)(c.p,{id:"deposit2",type:"number",step:"0.01",min:"0",max:"1",placeholder:"0.XX",className:"pl-8",value:w[1],onChange:e=>C([w[0],e.target.value])})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(i.$,{onClick:X,disabled:f||!w[0]||!w[1],className:"flex-1",children:f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify Account"}),(0,t.jsx)(i.$,{variant:"outline",onClick:()=>{p(null),S("pending"),C(["",""])},children:"Back"})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:(0,t.jsxs)("p",{className:"text-blue-800",children:[(0,t.jsx)("strong",{children:"Can't find the deposits?"}),' They may take up to 2 business days to appear. Look for deposits from "Stealth Money" or "SM Verify" in your transaction history.']})})]}):"verified"===B?P():(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Verify Your Bank Account"}),(0,t.jsx)("p",{className:"text-gray-600",children:"To send and receive money, we need to verify that you own this account."})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(l.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-blue-200",onClick:()=>!f&&M(),children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(j.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Micro-Deposits (Recommended)"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"We'll send 2 small deposits (under $1) to your account. Verify the amounts to complete setup."}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Takes 1-2 business days • Most secure method"})]})]})})}),(0,t.jsx)(l.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow border-2 hover:border-blue-200",onClick:()=>!f&&T(),children:(0,t.jsx)(l.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(u.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"Instant Verification"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Connect through your online banking for immediate verification."}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Instant setup • Powered by Plaid"})]}),(0,t.jsx)(m.E,{variant:"secondary",className:"text-xs",children:"Coming Soon"})]})})})]})]}),s&&!e.isVerified&&"pending"===B&&(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"You can verify this account later, but you won't be able to send or receive money until it's verified."}),(0,t.jsx)(i.$,{variant:"outline",onClick:s,children:"Skip for Now"})]})})]})]})}let w={CL:{countryCode:"CL",countryName:"Chile",currency:"CLP",flag:"\uD83C\uDDE8\uD83C\uDDF1",banks:[{id:"cl-001",name:"Banco de Chile",code:"001"},{id:"cl-012",name:"Banco del Estado (BancoEstado)",code:"012"},{id:"cl-016",name:"Banco de Cr\xe9dito e Inversiones (BCI)",code:"016"},{id:"cl-037",name:"Banco Santander Chile",code:"037"},{id:"cl-039",name:"Banco Ita\xfa Chile",code:"039"},{id:"cl-049",name:"Banco Security",code:"049"},{id:"cl-051",name:"Banco Falabella",code:"051"},{id:"cl-053",name:"Banco Ripley",code:"053"},{id:"cl-054",name:"Banco Consorcio",code:"054"},{id:"cl-055",name:"Banco BICE",code:"055"},{id:"cl-504",name:"Scotiabank Chile",code:"504"}],accountTypes:[{value:"checking",label:"Cuenta Corriente"},{value:"savings",label:"Cuenta de Ahorro"},{value:"vista",label:"Cuenta Vista"},{value:"rut",label:"Cuenta RUT (BancoEstado)"}],requiredFields:[{field:"rut",label:"RUT del Titular",type:"text",placeholder:"12.345.678-9",validation:"Chilean RUT",maxLength:12},{field:"accountNumber",label:"N\xfamero de Cuenta",type:"text",placeholder:"0123456789",maxLength:20}]},US:{countryCode:"US",countryName:"United States",currency:"USD",flag:"\uD83C\uDDFA\uD83C\uDDF8",banks:[{id:"us-boa",name:"Bank of America",code:"BOFAUS3N",swift:"BOFAUS3N"},{id:"us-chase",name:"JPMorgan Chase",code:"CHASUS33",swift:"CHASUS33"},{id:"us-wells",name:"Wells Fargo",code:"WFBIUS6S",swift:"WFBIUS6S"},{id:"us-citi",name:"Citibank",code:"CITIUS33",swift:"CITIUS33"},{id:"us-pnc",name:"PNC Bank",code:"PNCCUS33",swift:"PNCCUS33"},{id:"us-usbank",name:"U.S. Bank",code:"USBKUS44",swift:"USBKUS44"},{id:"us-capital",name:"Capital One",code:"HIBKUS44",swift:"HIBKUS44"},{id:"us-td",name:"TD Bank",code:"NRTHUS33",swift:"NRTHUS33"},{id:"us-regions",name:"Regions Bank",code:"UPNBUS44",swift:"UPNBUS44"},{id:"us-fifth",name:"Fifth Third Bank",code:"FTBCUS3C",swift:"FTBCUS3C"}],accountTypes:[{value:"checking",label:"Checking Account"},{value:"savings",label:"Savings Account"},{value:"money_market",label:"Money Market Account"}],requiredFields:[{field:"routingNumber",label:"Routing Number (ABA)",type:"text",placeholder:"123456789",validation:"US Routing Number",maxLength:9},{field:"accountNumber",label:"Account Number",type:"text",placeholder:"1234567890",maxLength:17}]},DE:{countryCode:"DE",countryName:"Germany",currency:"EUR",flag:"\uD83C\uDDE9\uD83C\uDDEA",banks:[{id:"de-deutsche",name:"Deutsche Bank",code:"DEUTDEFF",swift:"DEUTDEFF"},{id:"de-commerzbank",name:"Commerzbank",code:"COBADEFF",swift:"COBADEFF"},{id:"de-dkb",name:"DKB (Deutsche Kreditbank)",code:"BYLADEM1",swift:"BYLADEM1"},{id:"de-postbank",name:"Postbank",code:"PBNKDEFF",swift:"PBNKDEFF"},{id:"de-sparkasse",name:"Sparkasse",code:"VARIES",swift:"VARIES"},{id:"de-volksbank",name:"Volksbank",code:"VARIES",swift:"VARIES"},{id:"de-hypovereins",name:"HypoVereinsbank",code:"HYVEDEMMXXX",swift:"HYVEDEMMXXX"}],accountTypes:[{value:"girokonto",label:"Girokonto (Checking)"},{value:"sparkonto",label:"Sparkonto (Savings)"},{value:"tagesgeld",label:"Tagesgeldkonto (Daily Savings)"}],requiredFields:[{field:"iban",label:"IBAN",type:"text",placeholder:"DE89 3704 0044 0532 0130 00",validation:"IBAN",maxLength:34}]},ES:{countryCode:"ES",countryName:"Spain",currency:"EUR",flag:"\uD83C\uDDEA\uD83C\uDDF8",banks:[{id:"es-santander",name:"Banco Santander",code:"BSCHESMMXXX",swift:"BSCHESMMXXX"},{id:"es-bbva",name:"BBVA",code:"BBVAESMMXXX",swift:"BBVAESMMXXX"},{id:"es-caixa",name:"CaixaBank",code:"CAIXESBBXXX",swift:"CAIXESBBXXX"},{id:"es-sabadell",name:"Banco Sabadell",code:"BSABESBBXXX",swift:"BSABESBBXXX"},{id:"es-bankinter",name:"Bankinter",code:"BKBKESMMXXX",swift:"BKBKESMMXXX"},{id:"es-unicaja",name:"Unicaja Banco",code:"UCJAES2MXXX",swift:"UCJAES2MXXX"}],accountTypes:[{value:"corriente",label:"Cuenta Corriente"},{value:"ahorro",label:"Cuenta de Ahorro"},{value:"nomina",label:"Cuenta N\xf3mina"}],requiredFields:[{field:"iban",label:"IBAN",type:"text",placeholder:"ES91 2100 0418 4502 0005 1332",validation:"IBAN",maxLength:34}]},FR:{countryCode:"FR",countryName:"France",currency:"EUR",flag:"\uD83C\uDDEB\uD83C\uDDF7",banks:[{id:"fr-bnp",name:"BNP Paribas",code:"BNPAFRPPXXX",swift:"BNPAFRPPXXX"},{id:"fr-credit-agricole",name:"Cr\xe9dit Agricole",code:"AGRIFRPPXXX",swift:"AGRIFRPPXXX"},{id:"fr-societe",name:"Soci\xe9t\xe9 G\xe9n\xe9rale",code:"SOGEFRPPXXX",swift:"SOGEFRPPXXX"},{id:"fr-credit-mutuel",name:"Cr\xe9dit Mutuel",code:"CMCIFRPPXXX",swift:"CMCIFRPPXXX"},{id:"fr-banque-postale",name:"La Banque Postale",code:"PSSTFRPPXXX",swift:"PSSTFRPPXXX"},{id:"fr-lcl",name:"LCL",code:"CRLYFRPPXXX",swift:"CRLYFRPPXXX"}],accountTypes:[{value:"courant",label:"Compte Courant"},{value:"epargne",label:"Compte \xc9pargne"},{value:"livret_a",label:"Livret A"}],requiredFields:[{field:"iban",label:"IBAN",type:"text",placeholder:"FR14 2004 1010 0505 0001 3M02 606",validation:"IBAN",maxLength:34}]},IT:{countryCode:"IT",countryName:"Italy",currency:"EUR",flag:"\uD83C\uDDEE\uD83C\uDDF9",banks:[{id:"it-unicredit",name:"UniCredit",code:"UNCRITMMXXX",swift:"UNCRITMMXXX"},{id:"it-intesa",name:"Intesa Sanpaolo",code:"BCITITMM",swift:"BCITITMM"},{id:"it-mps",name:"Monte dei Paschi di Siena",code:"PASCITMMXXX",swift:"PASCITMMXXX"},{id:"it-bnl",name:"BNL (BNP Paribas)",code:"BNLIITRR",swift:"BNLIITRR"},{id:"it-banco-bpm",name:"Banco BPM",code:"BAPPIT21",swift:"BAPPIT21"}],accountTypes:[{value:"corrente",label:"Conto Corrente"},{value:"risparmio",label:"Conto di Risparmio"},{value:"deposito",label:"Conto Deposito"}],requiredFields:[{field:"iban",label:"IBAN",type:"text",placeholder:"IT60 X054 2811 1010 0000 0123 456",validation:"IBAN",maxLength:34}]},MX:{countryCode:"MX",countryName:"Mexico",currency:"MXN",flag:"\uD83C\uDDF2\uD83C\uDDFD",banks:[{id:"mx-bbva",name:"BBVA M\xe9xico",code:"012",swift:"BCMRMXMM"},{id:"mx-santander",name:"Santander M\xe9xico",code:"014",swift:"BMSXMXMM"},{id:"mx-banamex",name:"Citibanamex",code:"002",swift:"BNMXMXMM"},{id:"mx-banorte",name:"Banorte",code:"072",swift:"MENOMXMT"},{id:"mx-hsbc",name:"HSBC M\xe9xico",code:"021",swift:"BIMEMXMM"},{id:"mx-scotiabank",name:"Scotiabank",code:"044",swift:"MBCOMXMM"},{id:"mx-inbursa",name:"Inbursa",code:"036",swift:"INBUMXMM"},{id:"mx-azteca",name:"Banco Azteca",code:"127",swift:"AZTKMXMM"}],accountTypes:[{value:"checking",label:"Cuenta de Cheques"},{value:"savings",label:"Cuenta de Ahorro"},{value:"payroll",label:"Cuenta de N\xf3mina"}],requiredFields:[{field:"clabe",label:"CLABE",type:"text",placeholder:"012345678901234567",validation:"CLABE",maxLength:18}]},GB:{countryCode:"GB",countryName:"United Kingdom",currency:"GBP",flag:"\uD83C\uDDEC\uD83C\uDDE7",banks:[{id:"gb-hsbc",name:"HSBC UK",code:"HBUKGB4B",swift:"HBUKGB4B"},{id:"gb-barclays",name:"Barclays",code:"BUKBGB22",swift:"BUKBGB22"},{id:"gb-lloyds",name:"Lloyds Bank",code:"LOYDGB2L",swift:"LOYDGB2L"},{id:"gb-natwest",name:"NatWest",code:"NWBKGB2L",swift:"NWBKGB2L"},{id:"gb-santander",name:"Santander UK",code:"ABBYGB2L",swift:"ABBYGB2L"},{id:"gb-halifax",name:"Halifax",code:"HLFXGB21",swift:"HLFXGB21"},{id:"gb-nationwide",name:"Nationwide",code:"NAIAGB21",swift:"NAIAGB21"},{id:"gb-metro",name:"Metro Bank",code:"MYMBGB2L",swift:"MYMBGB2L"}],accountTypes:[{value:"current",label:"Current Account"},{value:"savings",label:"Savings Account"},{value:"isa",label:"ISA Account"}],requiredFields:[{field:"sortCode",label:"Sort Code",type:"text",placeholder:"12-34-56",validation:"UK Sort Code",maxLength:8},{field:"accountNumber",label:"Account Number",type:"text",placeholder:"12345678",validation:"UK Account Number",maxLength:8}]}};function C(e){let a;if(!e||"string"!=typeof e)return!1;let s=e.replace(/[\.\-\s]/g,"").toUpperCase();if(s.length<8||s.length>9)return!1;let t=s.slice(0,-1),n=s.slice(-1);if(!/^\d+$/.test(t)||!/^[0-9K]$/.test(n))return!1;let r=0,l=2;for(let e=t.length-1;e>=0;e--)r+=parseInt(t[e])*l,l=7===l?2:l+1;let i=11-r%11;return n===(11===i?"0":10===i?"K":i.toString())}function B({onComplete:e,onSkip:a,requireVerification:s=!1,onAccountAdded:h}){let{getToken:j}=(0,r.d)(),[v,k]=(0,n.useState)([]),[B,S]=(0,n.useState)(!0),[M,X]=(0,n.useState)(!1),[T,F]=(0,n.useState)(null),[P,I]=(0,n.useState)(!1),[E,U]=(0,n.useState)(""),[$,R]=(0,n.useState)(null),[L,D]=(0,n.useState)({accountName:"",country:"",bankId:"",accountHolderName:"",accountType:"",isPrimary:!1}),[V,H]=(0,n.useState)({}),[K,q]=(0,n.useState)(""),[G,O]=(0,n.useState)(null),Y=E?w[E]:null,W=async()=>{try{let e=await j(),a=await fetch("http://localhost:4000/api/users/me/bank-accounts",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json(),s=e.bankAccounts||e;k(Array.isArray(s)?s:[])}else k([])}catch(e){console.error("Error fetching bank accounts:",e),k([])}finally{S(!1)}},Z=()=>{let e={};if(L.accountName.trim()||(e.accountName="Account name is required"),E||(e.country="Please select a country"),$||(e.bankId="Please select a bank"),L.accountHolderName.trim()||(e.accountHolderName="Account holder name is required"),L.accountType||(e.accountType="Account type is required"),Y)for(let a of Y.requiredFields){let s=L[a.field];if(!s||"string"!=typeof s||!s.trim()){e[a.field]=`${a.label} is required`;continue}switch(a.validation){case"Chilean RUT":C(s)||(e[a.field]=function(e){var a;if(!e||""===e.trim())return"RUT es requerido";let s=(a=e)&&"string"==typeof a?a.replace(/[\.\-\s]/g,"").toUpperCase():"";if(s.length<7)return"RUT debe tener al menos 7 d\xedgitos";if(s.length>9)return"RUT no puede tener m\xe1s de 9 caracteres";let t=s.slice(0,-1),n=s.slice(-1);return/^\d+$/.test(t)?/^[0-9K]$/.test(n)?C(e)?"RUT no es v\xe1lido":"D\xedgito verificador no es v\xe1lido":"D\xedgito verificador debe ser un n\xfamero del 0-9 o K":"RUT debe contener solo n\xfameros antes del d\xedgito verificador"}(s));break;case"IBAN":!function(e){let a=e.replace(/\s/g,"").toUpperCase();if(!/^[A-Z]{2}[0-9]{2}[A-Z0-9]+$/.test(a))return!1;let s={DE:22,ES:24,FR:27,IT:27,GB:22},t=a.substring(0,2);return!s[t]||a.length===s[t]}(s)&&(e[a.field]="Invalid IBAN format");break;case"CLABE":!function(e){let a=e.replace(/\s/g,"");return!!/^\d{18}$/.test(a)}(s)&&(e[a.field]="CLABE must be 18 digits");break;case"US Routing Number":/^\d{9}$/.test(s)||(e[a.field]="Routing number must be 9 digits");break;case"UK Sort Code":!function(e){let a=e.replace(/-/g,"");return/^\d{6}$/.test(a)}(s)&&(e[a.field]="Sort code must be 6 digits")}}return H(e),0===Object.keys(e).length},z=async e=>{if(e.preventDefault(),Z()&&$&&Y){I(!0);try{let e=await j(),a={accountName:L.accountName,currency:Y.currency,country:E,bankName:$.name,bankCode:$.code,accountHolderName:L.accountHolderName,accountType:L.accountType,isPrimary:L.isPrimary};Y.requiredFields.forEach(e=>{L[e.field]&&(a[e.field]=L[e.field])});let s=T?`http://localhost:4000/api/users/me/bank-accounts/${T.id}`:"http://localhost:4000/api/users/me/bank-accounts",t=T?"PUT":"POST",n=await fetch(s,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(a)});if(n.ok){let e=await n.json();console.log("Bank account created successfully:",e),await W(),_(),X(!1),F(null),q(`✅ ${e.bankName} account added successfully! Verification required to start sending money.`),setTimeout(()=>q(""),5e3),h&&h(),console.log("Bank account creation completed, form closed")}else{let e=await n.json();console.error("Failed to save bank account:",e),H({general:e.message||"Failed to save bank account"})}}catch(e){console.error("Error saving bank account:",e),H({general:"Failed to save bank account. Please try again."})}finally{I(!1)}}},J=async e=>{if(confirm("Are you sure you want to delete this bank account?"))try{let a=await j();(await fetch(`http://localhost:4000/api/users/me/bank-accounts/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok?await W():console.error("Failed to delete bank account")}catch(e){console.error("Error deleting bank account:",e)}},_=()=>{U(""),R(null),D({accountName:"",country:"",bankId:"",accountHolderName:"",accountType:"",isPrimary:!1}),H({}),q("")},Q=e=>{let a=e.country,s=w[a],t=s?.banks.find(a=>a.code===e.bankCode);U(a),R(t||null);let n={accountName:e.accountName,country:a,bankId:t?.id||"",accountHolderName:e.accountHolderName,accountType:e.accountType||"",isPrimary:e.isPrimary};e.iban&&(n.iban=e.iban),e.accountNumber&&(n.accountNumber=e.accountNumber),e.routingNumber&&(n.routingNumber=e.routingNumber),e.rut&&(n.rut=e.rut),e.clabe&&(n.clabe=e.clabe),e.sortCode&&(n.sortCode=e.sortCode),e.ukAccountNumber&&(n.ukAccountNumber=e.ukAccountNumber),D(n),F(e),X(!0)},ee=Array.isArray(v)&&v.some(e=>e.isVerified),ea=Array.isArray(v)&&v.length>0&&!ee,es=async a=>{console.log("Verification completed for account:",a),O(null),await W();let s=await fetch("http://localhost:4000/api/users/me/bank-accounts",{headers:{Authorization:`Bearer ${await j()}`}});if(s.ok){let a=await s.json(),t=a.bankAccounts||a;Array.isArray(t)&&t.some(e=>e.isVerified)&&e&&(console.log("All requirements met, calling onComplete"),e())}};return B?(0,t.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):G?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Verify Bank Account"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Complete verification for ",G.bankName," to start sending money."]})]}),(0,t.jsx)(A,{account:G,onVerificationComplete:es,onSkip:()=>O(null)}),(0,t.jsx)(i.$,{variant:"outline",onClick:()=>O(null),children:"← Back to Account List"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:ea?"Verify Your Bank Account":"Bank Account Setup"}),(0,t.jsx)("p",{className:"text-gray-600",children:ea?"Complete bank account verification to start sending money globally.":"Add and verify your bank accounts to start sending money globally."})]}),K&&(0,t.jsx)(l.Zp,{className:"border-green-200 bg-green-50",children:(0,t.jsx)(l.Wu,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{className:"font-medium text-green-700",children:K})]})})}),ea&&(0,t.jsx)(l.Zp,{className:"border-blue-200 bg-blue-50",children:(0,t.jsx)(l.Wu,{className:"py-6",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-6 w-6 text-blue-600"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-blue-700",children:"Bank Account Added Successfully!"})]}),(0,t.jsx)("p",{className:"text-blue-600",children:'Your account has been added but needs verification to send money. Click "Verify Account" below to start the verification process.'})]})})}),Array.isArray(v)&&v.length>0&&(0,t.jsx)(l.Zp,{className:ee?"border-green-200 bg-green-50":"border-amber-200 bg-amber-50",children:(0,t.jsx)(l.Wu,{className:"py-4",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:ee?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("span",{className:"font-medium text-green-700",children:["You have ",v.filter(e=>e.isVerified).length," verified account(s)"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.A,{className:"h-5 w-5 text-amber-600"}),(0,t.jsx)("span",{className:"font-medium text-amber-700",children:"Verification required for your bank account(s)"})]})})})}),Array.isArray(v)&&v.length>0&&(0,t.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,t.jsx)(l.Zp,{className:"relative",children:(0,t.jsx)(l.Wu,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(p,{className:"h-8 w-8 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.accountName}),e.isPrimary&&(0,t.jsx)(m.E,{variant:"secondary",children:"Primary"}),(0,t.jsx)(m.E,{variant:e.isVerified?"default":"outline",children:e.isVerified?"Verified":"Pending"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.bankName," • ",e.currency," •","checking"===e.accountType?" Checking":" Savings"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:w[e.country]?.countryName}),!e.isVerified&&(0,t.jsxs)("p",{className:"text-xs text-amber-600 mt-1 flex items-center gap-1",children:[(0,t.jsx)(x.A,{className:"h-3 w-3"}),"Verification required to send money"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!e.isVerified&&(0,t.jsx)(i.$,{variant:"outline",size:"sm",className:"border-blue-500 text-blue-600 hover:bg-blue-50",onClick:()=>{O(e)},children:"Verify Account"}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>Q(e),children:(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>J(e.id),children:(0,t.jsx)(b,{className:"h-4 w-4 text-red-500"})})]})]})})},e.id))}),!M&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(i.$,{onClick:()=>{_(),X(!0)},className:"flex-1",variant:ea?"ghost":"outline",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2"}),ea?"Add Another Account":"Add Bank Account"]}),a&&!s&&!ea&&(0,t.jsx)(i.$,{onClick:a,variant:"ghost",children:"Skip for now"})]}),M&&(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:T?"Edit Bank Account":"Add New Bank Account"}),(0,t.jsx)(l.BT,{children:"Select your country first, then choose your bank and provide account details."})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[V.general&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)("p",{className:"text-sm text-red-600",children:V.general})}),(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Step 1: Select Your Country"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"country",children:"Country"}),(0,t.jsxs)(d.l6,{value:E,onValueChange:e=>{U(e),R(null);let a=w[e];D({accountName:"",country:e,bankId:"",accountHolderName:"",accountType:a?.accountTypes[0]?.value||"",isPrimary:!Array.isArray(v)||0===v.length}),H({})},children:[(0,t.jsx)(d.bq,{className:V.country?"border-red-500":"",children:(0,t.jsx)(d.yv,{placeholder:"Choose your country"})}),(0,t.jsx)(d.gC,{children:Object.values(w).sort((e,a)=>e.countryName.localeCompare(a.countryName)).map(e=>(0,t.jsx)(d.eb,{value:e.countryCode,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:e.flag}),(0,t.jsx)("span",{children:e.countryName}),(0,t.jsxs)("span",{className:"text-gray-500",children:["(",e.currency,")"]})]})},e.countryCode))})]}),V.country&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V.country})]})]}),E&&Y&&(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,t.jsx)(p,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Step 2: Select Your Bank"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"bank",children:"Bank"}),(0,t.jsxs)(d.l6,{value:L.bankId,onValueChange:e=>{Y&&(R(Y.banks.find(a=>a.id===e)||null),D(a=>({...a,bankId:e})))},children:[(0,t.jsx)(d.bq,{className:V.bankId?"border-red-500":"",children:(0,t.jsx)(d.yv,{placeholder:"Choose your bank"})}),(0,t.jsx)(d.gC,{children:Y.banks.map(e=>(0,t.jsx)(d.eb,{value:e.id,children:e.name},e.id))})]}),V.bankId&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V.bankId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"accountType",children:"Account Type"}),(0,t.jsxs)(d.l6,{value:L.accountType,onValueChange:e=>D(a=>({...a,accountType:e})),children:[(0,t.jsx)(d.bq,{className:V.accountType?"border-red-500":"",children:(0,t.jsx)(d.yv,{placeholder:"Select account type"})}),(0,t.jsx)(d.gC,{children:Y.accountTypes.map(e=>(0,t.jsx)(d.eb,{value:e.value,children:e.label},e.value))})]}),V.accountType&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V.accountType})]})]}),$&&Y&&(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,t.jsx)(N.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Step 3: Account Details"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"accountName",children:"Account Nickname"}),(0,t.jsx)(c.p,{id:"accountName",value:L.accountName,onChange:e=>D(a=>({...a,accountName:e.target.value})),placeholder:"e.g., My Chilean Account",className:V.accountName?"border-red-500":""}),V.accountName&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V.accountName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:"accountHolderName",children:"Account Holder Name"}),(0,t.jsx)(c.p,{id:"accountHolderName",value:L.accountHolderName,onChange:e=>D(a=>({...a,accountHolderName:e.target.value})),placeholder:"Full name as it appears on the account",className:V.accountHolderName?"border-red-500":""}),V.accountHolderName&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V.accountHolderName})]}),Y?Y.requiredFields.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)(o.J,{htmlFor:e.field,children:e.label}),(0,t.jsx)(c.p,{id:e.field,type:e.type,value:L[e.field]||"",onChange:a=>{let s=a.target.value;"rut"===e.field?s=function(e,a=""){if(!e)return"";let s=e.replace(/[^0-9K]/gi,"").toUpperCase().slice(0,9);if(s.length>=2){let e=s.slice(0,-1),a=s.slice(-1),t=e.replace(/\B(?=(\d{3})+(?!\d))/g,".");return`${t}-${a}`}return s}(s,L[e.field]||""):"sortCode"===e.field&&(s=function(e){let a=e.replace(/-/g,"");return a.length>=4?`${a.slice(0,2)}-${a.slice(2,4)}-${a.slice(4,6)}`:a}(s)),D(a=>({...a,[e.field]:s}))},placeholder:e.placeholder,maxLength:e.maxLength,className:V[e.field]?"border-red-500":""}),V[e.field]&&(0,t.jsx)("p",{className:"text-sm text-red-500 mt-1",children:V[e.field]})]},e.field)):null,Array.isArray(v)&&v.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isPrimary",checked:L.isPrimary,onChange:e=>D(a=>({...a,isPrimary:e.target.checked})),className:"rounded border-gray-300"}),(0,t.jsxs)(o.J,{htmlFor:"isPrimary",className:"text-sm font-normal",children:["Set as primary account for ",Y.currency]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(i.$,{type:"submit",disabled:P,className:"flex-1",children:P?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):T?"Update Account":"Add Account"}),(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>{X(!1),F(null),_()},children:"Cancel"})]})]})})]})]})}function S({children:e,requireVerification:a=!1,onOnboardingComplete:s,skipCheckOnPublicPages:l=!1,blockTransfersUntilVerified:i=!1}){let{getToken:c}=(0,r.d)(),[o,d]=(0,n.useState)(!0),[m,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)([]),p=async()=>{try{return d(!0),void u(!1)}catch(e){e instanceof Error&&"AbortError"===e.name?console.warn("Onboarding status check timed out (API may be slow or unavailable)"):console.warn("Onboarding status check error (API may not be running):",e),u(!1)}finally{d(!1)}};return o?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Checking account status..."})]})}):m?(0,t.jsx)(B,{onComplete:()=>{console.log("OnboardingGate: Onboarding completed, refreshing status..."),p(),s&&s()},onSkip:a||i?void 0:()=>{i||u(!1)},requireVerification:a||i,onAccountAdded:()=>{console.log("OnboardingGate: Account added, refreshing status..."),p()}}):(0,t.jsx)(t.Fragment,{children:e})}},23365:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(84667).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},31461:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(84667).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},58350:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(84667).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},62367:(e,a,s)=>{s.d(a,{Y:()=>u});var t=s(13486),n=s(60159),r=s(23365),l=s(59203),i=s(31461),c=s(63821),o=s(86e3),d=s(29563),m=s(74941);function u({transferId:e,onRefresh:a,autoRefresh:s=!0,refreshInterval:u=5e3}){let[x,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(!0),[b,y]=(0,n.useState)(null),[g,N]=(0,n.useState)(new Date),[j,v]=(0,n.useState)(!1),k=async(a=!0)=>{try{a&&f(!0),y(null);let s=await fetch(`http://localhost:4000/api/transfers/${e}/status`);if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Failed to fetch transfer status")}let t=await s.json();h(t),N(new Date),v(!0)}catch(e){console.error("Transfer status fetch error:",e),y(e instanceof Error?e.message:"Failed to fetch transfer status"),v(!1)}finally{a&&f(!1)}},A=()=>{k(!0),a&&a()},w=(e,a)=>new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),C=e=>new Date(e).toLocaleString(),B=e=>{switch(e){case"success":return{color:"text-green-600",icon:c.A};case"pending":return{color:"text-yellow-600",icon:r.A};case"failed":return{color:"text-red-600",icon:o.A};default:return{color:"text-gray-600",icon:r.A}}};if(p&&!x)return(0,t.jsx)(d.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,t.jsxs)(d.Wu,{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(l.A,{className:"h-6 w-6 animate-spin text-muted-foreground mr-2"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Loading transfer status..."})]})});if(b&&!x)return(0,t.jsx)(d.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,t.jsx)(d.Wu,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Error Loading Transfer"}),(0,t.jsx)("p",{className:"text-red-600 mb-4",children:b}),(0,t.jsxs)(m.$,{onClick:A,variant:"outline",children:[(0,t.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})});if(!x)return(0,t.jsx)(d.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,t.jsx)(d.Wu,{className:"py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Transfer Not Found"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["No transfer data available for ID: ",e]})]})})});let S=(e=>{switch(e){case"initiated":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:r.A,label:"Initiated"};case"payment_processing":return{color:"text-yellow-600",bgColor:"bg-yellow-50",icon:l.A,label:"Processing Payment"};case"transferring":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:i.A,label:"Transferring"};case"paying_out":return{color:"text-purple-600",bgColor:"bg-purple-50",icon:l.A,label:"Paying Out"};case"completed":return{color:"text-green-600",bgColor:"bg-green-50",icon:c.A,label:"Completed"};case"failed":return{color:"text-red-600",bgColor:"bg-red-50",icon:o.A,label:"Failed"};default:return{color:"text-gray-600",bgColor:"bg-gray-50",icon:r.A,label:"Unknown"}}})(x.status),M=S.icon,X=(e=>{switch(e){case"initiated":return 20;case"payment_processing":return 40;case"transferring":return 60;case"paying_out":return 80;case"completed":return 100;default:return 0}})(x.status);return(0,t.jsxs)(d.Zp,{className:"w-full max-w-2xl mx-auto shadow-sm",children:[(0,t.jsxs)(d.aR,{className:"pb-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,t.jsx)(M,{className:`h-5 w-5 ${S.color}`}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Transfer Status"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Status"})]}),(0,t.jsxs)(m.$,{onClick:A,variant:"outline",size:"sm",disabled:p,className:"self-start sm:self-auto",children:[(0,t.jsx)(l.A,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Refresh"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Update"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground break-all sm:break-normal",children:["ID: ",x.transferId]})]}),(0,t.jsxs)(d.Wu,{className:"space-y-6",children:[(0,t.jsx)("div",{className:`rounded-lg p-4 ${S.bgColor}`,children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(M,{className:`h-6 w-6 ${S.color}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:`font-semibold ${S.color}`,children:S.label}),x.estimatedCompletion&&"completed"!==x.status&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Estimated completion: ",C(x.estimatedCompletion)]}),x.completedAt&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Completed: ",C(x.completedAt)]})]})]})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[X,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:`h-2 rounded-full transition-all duration-500 ${"failed"===x.status?"bg-red-500":"bg-blue-500"}`,style:{width:`${X}%`}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"You sent"}),(0,t.jsx)("p",{className:"font-semibold",children:w(x.sendAmount,"USD")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recipient gets"}),(0,t.jsx)("p",{className:"font-semibold text-green-600",children:w(x.receiveAmount,"EUR")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exchange rate"}),(0,t.jsxs)("p",{className:"font-semibold",children:["1 USD = ",x.exchangeRate.toFixed(4)," EUR"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fees"}),(0,t.jsx)("p",{className:"font-semibold",children:w(x.fees,"USD")})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Timeline"}),j&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live updates"]})]}),(0,t.jsx)("div",{className:"relative",children:0===x.timeline.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(r.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No timeline events yet"})]}):(0,t.jsx)("div",{className:"space-y-4",children:x.timeline.map((e,a)=>{let s=B(e.status),n=s.icon,r=a===x.timeline.length-1,l=new Date(e.timestamp)>new Date(Date.now()-3e5);return(0,t.jsxs)("div",{className:`flex items-start gap-3 p-3 rounded-lg transition-all duration-300 ${l?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,t.jsx)("div",{className:`p-1 rounded-full ${"success"===e.status?"bg-green-100":"pending"===e.status?"bg-yellow-100":"bg-red-100"}`,children:(0,t.jsx)(n,{className:`h-4 w-4 ${s.color}`})}),!r&&(0,t.jsx)("div",{className:`w-px h-8 mt-2 ${"success"===e.status?"bg-green-300":"bg-gray-300"}`})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm sm:text-base",children:e.message}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[l&&(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"New"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:C(e.timestamp)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("p",{className:`text-xs capitalize font-medium ${s.color}`,children:e.status}),e.metadata&&Object.keys(e.metadata).length>0&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"• Additional details available"})]})]})]},e.id)})})})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground text-center border-t pt-4",children:["Last updated: ",C(x.lastUpdated),s&&"completed"!==x.status&&"failed"!==x.status&&(0,t.jsxs)("span",{className:"ml-2",children:["• Auto-refreshing every ",u/1e3,"s"]})]})]})]})}},74439:(e,a,s)=>{s.d(a,{A:()=>t});let t=(0,s(84667).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},93858:(e,a,s)=>{s.d(a,{Z:()=>o});var t=s(13486),n=s(68551),r=s(57956),l=s(97493),i=s(63821);let c=[{key:"calculator",label:"Calculate",shortLabel:"Calc",icon:n.A,description:"Enter transfer amount"},{key:"recipient",label:"Recipient",shortLabel:"Recipient",icon:r.A,description:"Add recipient details"},{key:"payment",label:"Payment",shortLabel:"Pay",icon:l.A,description:"Complete payment"},{key:"status",label:"Status",shortLabel:"Status",icon:i.A,description:"Track transfer"}];function o({currentStep:e,completedSteps:a,onStepClick:s}){let n=c.findIndex(a=>a.key===e),r=(s,t)=>a.includes(s.key)?"completed":s.key===e?"current":t<n?"completed":"upcoming",l=(e,a)=>{let s="relative flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-200",t=a?"cursor-pointer hover:scale-105":"";switch(e){case"completed":return`${s} ${t} bg-green-500 border-green-500 text-white`;case"current":return`${s} ${t} bg-blue-500 border-blue-500 text-white ring-4 ring-blue-100`;default:return`${s} bg-gray-100 border-gray-300 text-gray-400`}},o=e=>{let s=e<n||a.includes(c[e].key);return`flex-1 h-0.5 mx-2 transition-colors duration-300 ${s?"bg-green-500":"bg-gray-300"}`},d=t=>{s&&(a.includes(t.key)||t.key===e)&&s(t.key)};return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:c.map((s,n)=>{let m=r(s,n),u=a.includes(s.key)||s.key===e,x=s.icon;return(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:l(m,u),onClick:()=>d(s),role:u?"button":void 0,tabIndex:u?0:void 0,onKeyDown:e=>{u&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),d(s))},children:"completed"===m?(0,t.jsx)(i.A,{className:"w-5 h-5"}):(0,t.jsx)(x,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"mt-2 text-center",children:[(0,t.jsx)("div",{className:`text-sm font-medium ${"current"===m?"text-blue-600":"completed"===m?"text-green-600":"text-gray-500"}`,children:s.label}),(0,t.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:s.description})]})]}),n<c.length-1&&(0,t.jsx)("div",{className:o(n)})]},s.key)})})}),(0,t.jsxs)("div",{className:"md:hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:c.map((s,o)=>{let m=r(s,o),u=a.includes(s.key)||s.key===e,x=s.icon;return(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:l(m,u),onClick:()=>d(s),role:u?"button":void 0,tabIndex:u?0:void 0,onKeyDown:e=>{u&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),d(s))},children:"completed"===m?(0,t.jsx)(i.A,{className:"w-4 h-4"}):(0,t.jsx)(x,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"mt-1 text-center",children:(0,t.jsx)("div",{className:`text-xs font-medium ${"current"===m?"text-blue-600":"completed"===m?"text-green-600":"text-gray-500"}`,children:s.shortLabel})})]}),o<c.length-1&&(0,t.jsx)("div",{className:`flex-1 h-0.5 mx-1 ${o<n||a.includes(c[o].key)?"bg-green-500":"bg-gray-300"}`})]},s.key)})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",n+1," of ",c.length,": ",c[n]?.description]})})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[Math.round((n+1)/c.length*100),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${(n+1)/c.length*100}%`}})})]})]})}}};