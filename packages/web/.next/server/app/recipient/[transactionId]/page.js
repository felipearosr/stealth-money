(()=>{var e={};e.id=328,e.ids=[328],e.modules={859:(e,a,t)=>{Promise.resolve().then(t.bind(t,30100))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29168:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>g});var s=t(13486),r=t(2984),l=t(60159),i=t(21232),n=t(86698),c=t(74941),o=t(29563),d=t(23025),p=t(41571),h=t(86629),u=t(84667);let m=(0,u.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,u.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),j=(0,u.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),v=(0,u.A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),y=(0,u.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var b=t(31461);let N=i.Ik({recipientName:i.Yj().min(2,"Name must be at least 2 characters"),recipientEmail:i.Yj().email("Please enter a valid email address"),recipientPhone:i.Yj().min(10,"Please enter a valid phone number"),payoutMethod:i.k5(["bank_account","mobile_wallet","cash_pickup","debit_card"],{message:"Please select a payout method"}),payoutDetails:i.Ik({bankName:i.Yj().optional(),accountNumber:i.Yj().optional(),routingNumber:i.Yj().optional(),walletProvider:i.Yj().optional(),walletNumber:i.Yj().optional(),pickupLocation:i.Yj().optional()}).optional()});function g(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),t=e.transactionId,[i,u]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[w,k]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[q,A]=(0,l.useState)(""),[F,I]=(0,l.useState)(""),[M,R]=(0,l.useState)(""),[E,J]=(0,l.useState)(""),[D,Y]=(0,l.useState)(""),[G,z]=(0,l.useState)(!1),[W,B]=(0,l.useState)(null),[T,L]=(0,l.useState)({}),$=async e=>{e.preventDefault(),L({}),B(null);let s={recipientName:i,recipientEmail:g,recipientPhone:w,payoutMethod:P,payoutDetails:{bankName:C||void 0,accountNumber:q||void 0,routingNumber:F||void 0,walletProvider:M||void 0,walletNumber:E||void 0,pickupLocation:D||void 0}};try{N.parse(s)}catch(e){if(e instanceof n.G){let a={};e.issues.forEach(e=>{e.path[0]&&(a[e.path[0]]=e.message)}),L(a);return}}z(!0);try{let e=await fetch(`http://localhost:4000/api/transfers/${t}/recipient`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientName:i,recipientEmail:g,recipientPhone:w,payoutMethod:P,payoutDetails:s.payoutDetails})});if(!e.ok)throw Error("Failed to update recipient information");let r=await e.json();a.push(`/pay/${t}?clientSecret=${r.clientSecret}`)}catch(e){B("Failed to save recipient information. Please try again."),console.error("Recipient update error:",e)}finally{z(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center p-4",children:(0,s.jsxs)(o.Zp,{className:"w-full max-w-2xl",children:[(0,s.jsxs)(o.aR,{children:[(0,s.jsxs)(o.ZB,{className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Recipient Information"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Tell us who you're sending money to and how they should receive it."})]}),(0,s.jsxs)("form",{onSubmit:$,children:[(0,s.jsxs)(o.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Recipient Details"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"recipient-name",children:"Full Name *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(d.p,{id:"recipient-name",placeholder:"Enter recipient's full name",className:"pl-10",value:i,onChange:e=>u(e.target.value)})]}),T.recipientName&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:T.recipientName})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"recipient-email",children:"Email Address *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(d.p,{id:"recipient-email",type:"email",placeholder:"recipient@example.com",className:"pl-10",value:g,onChange:e=>f(e.target.value)})]}),T.recipientEmail&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:T.recipientEmail})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"recipient-phone",children:"Phone Number *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(d.p,{id:"recipient-phone",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:w,onChange:e=>k(e.target.value)})]}),T.recipientPhone&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:T.recipientPhone})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"How should they receive the money?"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"payout-method",children:"Payout Method *"}),(0,s.jsxs)(h.l6,{value:P,onValueChange:_,children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{placeholder:"Select payout method"})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"bank_account",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Bank Account"})]})}),(0,s.jsx)(h.eb,{value:"mobile_wallet",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Mobile Wallet"})]})}),(0,s.jsx)(h.eb,{value:"cash_pickup",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Cash Pickup"})]})}),(0,s.jsx)(h.eb,{value:"debit_card",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(v,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Debit Card"})]})})]})]}),T.payoutMethod&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:T.payoutMethod})]}),P&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Payout Details"}),(()=>{switch(P){case"bank_account":return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"bank-name",children:"Bank Name"}),(0,s.jsx)(d.p,{id:"bank-name",placeholder:"e.g., Chase Bank",value:C,onChange:e=>S(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"account-number",children:"Account Number"}),(0,s.jsx)(d.p,{id:"account-number",placeholder:"Account number",value:q,onChange:e=>A(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"routing-number",children:"Routing Number"}),(0,s.jsx)(d.p,{id:"routing-number",placeholder:"Routing number",value:F,onChange:e=>I(e.target.value)})]})]});case"mobile_wallet":return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"wallet-provider",children:"Wallet Provider"}),(0,s.jsxs)(h.l6,{value:M,onValueChange:R,children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{placeholder:"Select wallet provider"})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"paypal",children:"PayPal"}),(0,s.jsx)(h.eb,{value:"venmo",children:"Venmo"}),(0,s.jsx)(h.eb,{value:"cashapp",children:"Cash App"}),(0,s.jsx)(h.eb,{value:"zelle",children:"Zelle"}),(0,s.jsx)(h.eb,{value:"pix",children:"PIX (Brazil)"}),(0,s.jsx)(h.eb,{value:"paym",children:"Paym (UK)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"wallet-number",children:"Wallet ID / Phone Number"}),(0,s.jsx)(d.p,{id:"wallet-number",placeholder:"Wallet ID or phone number",value:E,onChange:e=>J(e.target.value)})]})]});case"cash_pickup":return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"pickup-location",children:"Pickup Location"}),(0,s.jsxs)(h.l6,{value:D,onValueChange:Y,children:[(0,s.jsx)(h.bq,{children:(0,s.jsx)(h.yv,{placeholder:"Select pickup location"})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"western_union",children:"Western Union"}),(0,s.jsx)(h.eb,{value:"moneygram",children:"MoneyGram"}),(0,s.jsx)(h.eb,{value:"ria",children:"Ria Money Transfer"}),(0,s.jsx)(h.eb,{value:"remitly",children:"Remitly"}),(0,s.jsx)(h.eb,{value:"worldremit",children:"WorldRemit"})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:["The recipient will receive a pickup code via SMS and can collect cash at any ",D?.replace("_"," ")," location."]})})]});case"debit_card":return(0,s.jsx)("div",{className:"bg-green-50 p-3 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Funds will be sent directly to the recipient's debit card. No additional details required."})});default:return null}})()]})]}),W&&(0,s.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:W})]}),(0,s.jsxs)(o.wL,{className:"flex justify-between",children:[(0,s.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:G,children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,s.jsx)(c.$,{type:"submit",disabled:G||!i||!g||!w||!P,children:G?"Saving...":(0,s.jsxs)(s.Fragment,{children:["Continue to Payment",(0,s.jsx)(b.A,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30100:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/faros/stealth-money/packages/web/src/app/recipient/[transactionId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/faros/stealth-money/packages/web/src/app/recipient/[transactionId]/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},54003:(e,a,t)=>{Promise.resolve().then(t.bind(t,29168))},60810:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>o});var s=t(24332),r=t(48819),l=t(67851),i=t.n(l),n=t(97540),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(a,c);let o={children:["",{children:["recipient",{children:["[transactionId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,30100)),"/home/faros/stealth-money/packages/web/src/app/recipient/[transactionId]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,20685)),"/home/faros/stealth-money/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/faros/stealth-money/packages/web/src/app/recipient/[transactionId]/page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/recipient/[transactionId]/page",pathname:"/recipient/[transactionId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[620,25,253,927,462,312],()=>t(60810));module.exports=s})();