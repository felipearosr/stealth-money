(()=>{var e={};e.id=702,e.ids=[702],e.modules={1280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(13486),a=s(60159),n=s(89556),i=s(76123),l=s(68325),c=s(34560),o=s(67959),d=s(62367),u=s(93858),m=s(12370),p=s(29563),x=s(74941),h=s(9431),f=s(86e3),b=s(15998),g=s(2984);function j(){let{user:e,isLoaded:t}=(0,n.Jd)(),{getToken:s}=(0,i.d)(),j=(0,g.useRouter)(),[v,y]=(0,a.useState)({currentStep:"calculator",transferData:null,recipientUser:null,selectedPaymentMethod:null,transferId:null,completedSteps:[],canGoBack:!1,isLoading:!1,error:null}),N=(0,a.useCallback)(e=>{y(t=>({...t,...e}))},[]),k=(0,a.useCallback)(e=>{N({currentStep:e,canGoBack:"calculator"!==e,error:null})},[N]),w=(0,a.useCallback)(()=>{let e=["calculator","recipient","payment","status"],t=e.indexOf(v.currentStep);t>0?k(e[t-1]):j.push("/dashboard")},[v.currentStep,k,j]),C=(0,a.useCallback)(e=>{y(t=>({...t,completedSteps:t.completedSteps.includes(e)?t.completedSteps:[...t.completedSteps,e]}))},[]),S=(0,a.useCallback)(e=>{N({transferData:{sendAmount:e.sendAmount,receiveAmount:e.receiveAmount,sendCurrency:e.sendCurrency,receiveCurrency:e.receiveCurrency,exchangeRate:e.exchangeRate,fees:e.fees,rateId:e.rateId,rateValidUntil:e.rateValidUntil,calculatorMode:e.calculatorMode,breakdown:e.breakdown,estimatedArrival:e.estimatedArrival},isLoading:!0}),C("calculator"),setTimeout(()=>{N({isLoading:!1}),k("recipient")},500)},[N,C,k]),P=(0,a.useCallback)((e,t)=>{N({recipientUser:e,selectedPaymentMethod:t,isLoading:!0}),C("recipient"),setTimeout(()=>{N({isLoading:!1}),k("payment")},500)},[N,C,k]),A=(0,a.useCallback)(async e=>{C("payment"),N({transferId:e,isLoading:!1}),k("status")},[C,N,k]),D=(0,a.useCallback)(e=>{N({error:e,isLoading:!1})},[N]);return t?e?(0,r.jsx)(m.A,{requireVerification:!1,skipCheckOnPublicPages:!1,blockTransfersUntilVerified:!0,children:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,r.jsx)(u.Z,{currentStep:v.currentStep,completedSteps:v.completedSteps,onStepClick:e=>{(v.completedSteps.includes(e)||e===v.currentStep)&&k(e)}}),v.canGoBack&&"status"!==v.currentStep&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)(x.$,{variant:"outline",onClick:w,disabled:v.isLoading,className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),"Back"]})}),v.error&&(0,r.jsx)(p.Zp,{className:"border-red-200 bg-red-50",children:(0,r.jsxs)(p.Wu,{className:"py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,r.jsx)("p",{className:"text-red-600 mt-1",children:v.error}),(0,r.jsx)(x.$,{variant:"outline",size:"sm",onClick:()=>N({error:null}),className:"mt-2",children:"Dismiss"})]})}),(0,r.jsxs)("div",{className:"relative",children:[v.isLoading&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),(()=>{switch(v.currentStep){case"calculator":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(p.Zp,{children:(0,r.jsxs)(p.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(h.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Send Money to User"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Send money directly to another registered user. No bank details needed - just search and send!"})]})}),(0,r.jsx)(l.W,{onContinue:S,isNavigating:v.isLoading})]});case"recipient":if(!v.transferData)return(0,r.jsx)(p.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(p.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Transfer Data"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the calculator step first."}),(0,r.jsx)(x.$,{onClick:()=>k("calculator"),variant:"outline",children:"Go to Calculator"})]})});return(0,r.jsx)(c.E,{transferData:{sendAmount:v.transferData.sendAmount,receiveAmount:v.transferData.receiveAmount,sendCurrency:v.transferData.sendCurrency,receiveCurrency:v.transferData.receiveCurrency,exchangeRate:v.transferData.exchangeRate,fees:v.transferData.fees},onRecipientSelected:P,onBack:w,currentUserId:e?.id,isLoading:v.isLoading});case"payment":if(!v.transferData||!v.recipientUser||!v.selectedPaymentMethod)return(0,r.jsx)(p.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(p.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Required Data"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the previous steps first."}),(0,r.jsx)(x.$,{onClick:()=>k("calculator"),variant:"outline",children:"Start Over"})]})});return(0,r.jsx)(o.d,{transferData:v.transferData,recipientUser:v.recipientUser,selectedPaymentMethod:v.selectedPaymentMethod,onSuccess:A,onBack:w,onError:D,isLoading:v.isLoading});case"status":if(!v.transferId)return(0,r.jsx)(p.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(p.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"No Transfer Found"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Transfer ID is missing."}),(0,r.jsx)(x.$,{onClick:()=>k("calculator"),variant:"outline",children:"Start New Transfer"})]})});return(0,r.jsx)(d.Y,{transferId:v.transferId,onRefresh:()=>{},autoRefresh:!0});default:return(0,r.jsx)(p.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(p.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Unknown Step"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Invalid step: ",v.currentStep]}),(0,r.jsx)(x.$,{onClick:()=>k("calculator"),variant:"outline",children:"Start Over"})]})})}})()]})]})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsx)(p.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(p.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Please sign in to send money to users."}),(0,r.jsx)(x.$,{onClick:()=>j.push("/auth/sign-in"),children:"Sign In"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33494:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o});var r=s(24332),a=s(48819),n=s(67851),i=s.n(n),l=s(97540),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["transfer",{children:["user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,92762)),"/home/faros/stealth-money/packages/web/src/app/transfer/user/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,39227)),"/home/faros/stealth-money/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,87239)),"/home/faros/stealth-money/packages/web/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/faros/stealth-money/packages/web/src/app/transfer/user/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/transfer/user/page",pathname:"/transfer/user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68621:(e,t,s)=>{Promise.resolve().then(s.bind(s,92762))},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},92589:(e,t,s)=>{Promise.resolve().then(s.bind(s,1280))},92762:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/faros/stealth-money/packages/web/src/app/transfer/user/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/faros/stealth-money/packages/web/src/app/transfer/user/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[620,795,927,338,913,208,325,959,985,560],()=>s(33494));module.exports=r})();