(()=>{var e={};e.id=614,e.ids=[614],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10119:(e,t,s)=>{Promise.resolve().then(s.bind(s,14342))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(13486),a=s(60159),n=s(89556),i=s(76123),l=s(2984),c=s(81313),o=s(34560),d=s(67959),u=s(62367),m=s(93858),p=s(84131),x=s(29563),h=s(74941),f=s(68551),b=s(86e3),g=s(15998);function j(){let{user:e,isLoaded:t}=(0,n.Jd)(),{}=(0,i.d)(),s=(0,l.useRouter)(),[j,v]=(0,a.useState)({currentStep:"calculator",transferData:null,recipientUser:null,selectedPaymentMethod:null,transferId:null,completedSteps:[],canGoBack:!1,isLoading:!1,error:null}),y=(0,a.useCallback)(e=>{v(t=>({...t,...e}))},[]),N=(0,a.useCallback)(e=>{y({currentStep:e,canGoBack:"calculator"!==e,error:null})},[y]),w=(0,a.useCallback)(()=>{let e=["calculator","recipient","payment","status"],t=e.indexOf(j.currentStep);t>0?N(e[t-1]):s.push("/")},[j.currentStep,N,s]),k=(0,a.useCallback)(e=>{v(t=>({...t,completedSteps:t.completedSteps.includes(e)?t.completedSteps:[...t.completedSteps,e]}))},[]),C=(0,a.useCallback)(e=>{y({transferData:{sendAmount:e.sendAmount,receiveAmount:e.receiveAmount,sendCurrency:e.sendCurrency,receiveCurrency:e.receiveCurrency,exchangeRate:e.exchangeRate,fees:e.fees,rateId:e.rateId,rateValidUntil:e.rateValidUntil,calculatorMode:e.calculatorMode,breakdown:e.breakdown,estimatedArrival:e.estimatedArrival},isLoading:!0}),k("calculator"),setTimeout(()=>{y({isLoading:!1}),N("recipient")},500)},[y,k,N]),P=(0,a.useCallback)((e,t)=>{y({recipientUser:e,selectedPaymentMethod:t,isLoading:!0}),k("recipient"),setTimeout(()=>{y({isLoading:!1}),N("payment")},500)},[y,k,N]),S=(0,a.useCallback)(async e=>{k("payment"),y({transferId:e,isLoading:!1}),N("status")},[k,y,N]),A=(0,a.useCallback)(e=>{y({error:e,isLoading:!1})},[y]);return t?(0,r.jsx)(p.A,{requireVerification:!1,skipCheckOnPublicPages:!1,blockTransfersUntilVerified:!0,children:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Transfer"}),(0,r.jsx)("p",{className:"text-gray-600",children:e?"Follow the steps below to send your money securely":"Sign in to continue with your transfer"})]}),(0,r.jsx)(m.Z,{currentStep:j.currentStep,completedSteps:j.completedSteps,onStepClick:e=>{(j.completedSteps.includes(e)||e===j.currentStep)&&N(e)}}),j.canGoBack&&"status"!==j.currentStep&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)(h.$,{variant:"outline",onClick:w,disabled:j.isLoading,className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),"Back"]})}),j.error&&(0,r.jsx)(x.Zp,{className:"border-red-200 bg-red-50",children:(0,r.jsxs)(x.Wu,{className:"py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,r.jsx)("p",{className:"text-red-600 mt-1",children:j.error}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>y({error:null}),className:"mt-2",children:"Dismiss"})]})}),(0,r.jsxs)("div",{className:"relative",children:[j.isLoading&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),(()=>{switch(j.currentStep){case"calculator":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(x.Zp,{children:(0,r.jsxs)(x.Wu,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(f.A,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Calculate Your Transfer"})]}),(0,r.jsx)("p",{className:"text-gray-600",children:"Enter the amount you want to send and see the real-time exchange rate and fees."})]})}),(0,r.jsx)(c.W,{onContinue:C,isNavigating:j.isLoading})]});case"recipient":if(!j.transferData)return(0,r.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Transfer Data"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the calculator step first."}),(0,r.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Go to Calculator"})]})});return(0,r.jsx)(o.E,{transferData:{sendAmount:j.transferData.sendAmount,receiveAmount:j.transferData.receiveAmount,sendCurrency:j.transferData.sendCurrency,receiveCurrency:j.transferData.receiveCurrency,exchangeRate:j.transferData.exchangeRate,fees:j.transferData.fees},onRecipientSelected:P,onBack:w,currentUserId:e?.id,isLoading:j.isLoading});case"payment":if(!j.transferData||!j.recipientUser||!j.selectedPaymentMethod)return(0,r.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Required Data"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the previous steps first."}),(0,r.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start Over"})]})});return(0,r.jsx)(d.d,{transferData:j.transferData,recipientUser:j.recipientUser,selectedPaymentMethod:j.selectedPaymentMethod,onSuccess:S,onBack:w,onError:A,isLoading:j.isLoading});case"status":if(!j.transferId)return(0,r.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"No Transfer Found"}),(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Transfer ID is missing."}),(0,r.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start New Transfer"})]})});return(0,r.jsx)(u.Y,{transferId:j.transferId,onRefresh:()=>{},autoRefresh:!0});default:return(0,r.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,r.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,r.jsx)(b.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Unknown Step"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Invalid step: ",j.currentStep]}),(0,r.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start Over"})]})})}})()]})]})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function v(){return"pk_test_c21pbGluZy1waXBlZmlzaC0xNy5jbGVyay5hY2NvdW50cy5kZXYk".includes("placeholder")?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsx)(x.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configuration Required"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Authentication is not properly configured. Please set up Clerk authentication to access transfers."}),(0,r.jsx)(h.$,{onClick:()=>window.location.href="/",children:"Go Home"})]})})}):(0,r.jsx)(j,{})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx","default")},26991:(e,t,s)=>{Promise.resolve().then(s.bind(s,26384))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},60974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o});var r=s(24332),a=s(48819),n=s(67851),i=s.n(n),l=s(97540),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["transfer",{children:["process",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26384)),"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,39227)),"/home/faros/stealth-money/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,87239)),"/home/faros/stealth-money/packages/web/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/transfer/process/page",pathname:"/transfer/process",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[620,795,927,455,338,228,208,313,131,959,560,380],()=>s(60974));module.exports=r})();