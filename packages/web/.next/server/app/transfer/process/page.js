(()=>{var e={};e.id=614,e.ids=[614],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10119:(e,t,r)=>{Promise.resolve().then(r.bind(r,14342))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(13486),a=r(60159),n=r(89556),i=r(76123),l=r(2984),c=r(81313),o=r(34560),d=r(67959),u=r(62367),m=r(93858),p=r(84131),x=r(29563),h=r(74941),f=r(68551),b=r(86e3),g=r(15998);function j(){let{user:e,isLoaded:t}=(0,n.Jd)(),{}=(0,i.d)(),r=(0,l.useRouter)(),[j,v]=(0,a.useState)({currentStep:"calculator",transferData:null,recipientUser:null,selectedPaymentMethod:null,transferId:null,completedSteps:[],canGoBack:!1,isLoading:!1,error:null}),y=(0,a.useCallback)(e=>{v(t=>({...t,...e}))},[]),N=(0,a.useCallback)(e=>{y({currentStep:e,canGoBack:"calculator"!==e,error:null})},[y]),w=(0,a.useCallback)(()=>{let e=["calculator","recipient","payment","status"],t=e.indexOf(j.currentStep);t>0?N(e[t-1]):r.push("/")},[j.currentStep,N,r]),k=(0,a.useCallback)(e=>{v(t=>({...t,completedSteps:t.completedSteps.includes(e)?t.completedSteps:[...t.completedSteps,e]}))},[]),C=(0,a.useCallback)(e=>{y({transferData:{sendAmount:e.sendAmount,receiveAmount:e.receiveAmount,sendCurrency:e.sendCurrency,receiveCurrency:e.receiveCurrency,exchangeRate:e.exchangeRate,fees:e.fees,rateId:e.rateId,rateValidUntil:e.rateValidUntil,calculatorMode:e.calculatorMode,breakdown:e.breakdown,estimatedArrival:e.estimatedArrival},isLoading:!0}),k("calculator"),setTimeout(()=>{y({isLoading:!1}),N("recipient")},500)},[y,k,N]),P=(0,a.useCallback)((e,t)=>{y({recipientUser:e,selectedPaymentMethod:t,isLoading:!0}),k("recipient"),setTimeout(()=>{y({isLoading:!1}),N("payment")},500)},[y,k,N]),S=(0,a.useCallback)(async e=>{k("payment"),y({transferId:e,isLoading:!1}),N("status")},[k,y,N]),A=(0,a.useCallback)(e=>{y({error:e,isLoading:!1})},[y]);return t?(0,s.jsx)(p.A,{requireVerification:!1,skipCheckOnPublicPages:!1,blockTransfersUntilVerified:!0,children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Transfer"}),(0,s.jsx)("p",{className:"text-gray-600",children:e?"Follow the steps below to send your money securely":"Sign in to continue with your transfer"})]}),(0,s.jsx)(m.Z,{currentStep:j.currentStep,completedSteps:j.completedSteps,onStepClick:e=>{(j.completedSteps.includes(e)||e===j.currentStep)&&N(e)}}),j.canGoBack&&"status"!==j.currentStep&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)(h.$,{variant:"outline",onClick:w,disabled:j.isLoading,className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),"Back"]})}),j.error&&(0,s.jsx)(x.Zp,{className:"border-red-200 bg-red-50",children:(0,s.jsxs)(x.Wu,{className:"py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,s.jsx)(b.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,s.jsx)("p",{className:"text-red-600 mt-1",children:j.error}),(0,s.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>y({error:null}),className:"mt-2",children:"Dismiss"})]})}),(0,s.jsxs)("div",{className:"relative",children:[j.isLoading&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),(()=>{switch(j.currentStep){case"calculator":return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(x.Zp,{children:(0,s.jsxs)(x.Wu,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)(f.A,{className:"h-6 w-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Calculate Your Transfer"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Enter the amount you want to send and see the real-time exchange rate and fees."})]})}),(0,s.jsx)(c.W,{onContinue:C,isNavigating:j.isLoading})]});case"recipient":if(!j.transferData)return(0,s.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,s.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Transfer Data"}),(0,s.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the calculator step first."}),(0,s.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Go to Calculator"})]})});return(0,s.jsx)(o.E,{transferData:{sendAmount:j.transferData.sendAmount,receiveAmount:j.transferData.receiveAmount,sendCurrency:j.transferData.sendCurrency,receiveCurrency:j.transferData.receiveCurrency,exchangeRate:j.transferData.exchangeRate,fees:j.transferData.fees},onRecipientSelected:P,onBack:w,currentUserId:e?.id,isLoading:j.isLoading});case"payment":if(!j.transferData||!j.recipientUser||!j.selectedPaymentMethod)return(0,s.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,s.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Required Data"}),(0,s.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the previous steps first."}),(0,s.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start Over"})]})});return(0,s.jsx)(d.d,{transferData:j.transferData,recipientUser:j.recipientUser,selectedPaymentMethod:j.selectedPaymentMethod,onSuccess:S,onBack:w,onError:A,isLoading:j.isLoading});case"status":if(!j.transferId)return(0,s.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,s.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"No Transfer Found"}),(0,s.jsx)("p",{className:"text-red-600 mb-4",children:"Transfer ID is missing."}),(0,s.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start New Transfer"})]})});return(0,s.jsx)(u.Y,{transferId:j.transferId,onRefresh:()=>{},autoRefresh:!0});default:return(0,s.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,s.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Unknown Step"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["Invalid step: ",j.currentStep]}),(0,s.jsx)(h.$,{onClick:()=>N("calculator"),variant:"outline",children:"Start Over"})]})})}})()]})]})})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx","default")},26991:(e,t,r)=>{Promise.resolve().then(r.bind(r,26384))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},60974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o});var s=r(24332),a=r(48819),n=r(67851),i=r.n(n),l=r(97540),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(t,c);let o={children:["",{children:["transfer",{children:["process",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,26384)),"/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,39227)),"/home/faros/stealth-money/packages/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,87239)),"/home/faros/stealth-money/packages/web/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/faros/stealth-money/packages/web/src/app/transfer/process/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/transfer/process/page",pathname:"/transfer/process",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[620,795,927,455,338,475,208,313,131,959,560,380],()=>r(60974));module.exports=s})();