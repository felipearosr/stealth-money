(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{702:(e,t,s)=>{e.exports=s(3755)},1356:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8889).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},3353:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l,wL:()=>d});var a=s(4568);s(7620);var r=s(3928);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},3755:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useRouter",{enumerable:!0,get:function(){return n}});let a=s(7620),r=s(9208);function n(){return(0,a.useContext)(r.RouterContext)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3839:(e,t,s)=>{Promise.resolve().then(s.bind(s,6459))},3928:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2987),r=s(607);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5191:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6181:(e,t,s)=>{"use strict";s.d(t,{PromisifiedAuthProvider:()=>c,d:()=>d});var a=s(7807),r=s(7575),n=s(702),l=s(7620);let i=l.createContext(null);function c(e){let{authPromise:t,children:s}=e;return l.createElement(i.Provider,{value:t},s)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRouter)(),s=l.useContext(i),c=s;return(s&&"then"in s&&(c=l.use(s)),"undefined"!=typeof window)?(0,a.As)({...c,...e}):t?(0,a.As)(e):(0,r.hP)({...c,...e})}},6459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var a=s(4568),r=s(7807),n=s(6181),l=s(7620),i=s(3353),c=s(7227),d=s(615),o=s(3928);let x=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)(x({variant:s}),t),...r})}var h=s(5191),m=s(9513),g=s(1356),f=s(9369),v=s(8889);let p=(0,v.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var j=s(7277),b=s(7261),y=s.n(b);let N=(0,v.A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),w=(0,v.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);function A(){var e;let{user:t,isLoaded:s,isSignedIn:d}=(0,r.Jd)(),{getToken:o}=(0,n.d)(),[x,h]=(0,l.useState)(null),[m,g]=(0,l.useState)(!0),[v,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{if(!d)return void g(!1);try{let e=await o(),t=await fetch("".concat("http://localhost:4000","/api/account/balance"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch account balance");let s=await t.json();h(s)}catch(e){p("Failed to load account balance"),console.error("Balance fetch error:",e)}finally{g(!1)}};s&&e()},[s,d,t]);let j=(e,t)=>{let s=t&&3===t.length?t:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e)},b=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return s?d?m?(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-6 flex items-center justify-center",children:[(0,a.jsx)(f.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{children:"Loading account balance..."})]})}):v?(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-6 text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:v}),(0,a.jsx)(c.$,{variant:"outline",onClick:()=>window.location.reload(),children:"Try Again"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(N,{className:"h-5 w-5 mr-2"}),"Your Stealth Money Account"]})}),(0,a.jsx)(i.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:x?j(x.availableBalance,"USD"):"$0.00"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Available Balance"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:x?j(x.totalReceived,"USD"):"$0.00"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Received"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x?j(x.totalSent,"USD"):"$0.00"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Sent"})]})]})})]}),x&&x.recentReceived.length>0&&(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Recent Money Received"})}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:x.recentReceived.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,a.jsx)(w,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:j(e.amount,e.currency)}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["From: ",e.from]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:b(e.date)})]})]}),(0,a.jsx)(u,{className:"COMPLETED"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:e.status})]},e.id))})})]}),x&&0===x.recentReceived.length&&(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(w,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Money Received Yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"When someone sends you money through Stealth Money, it will appear here."}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)("p",{children:"Share your email address with senders to receive money:"}),(0,a.jsx)("p",{className:"font-mono bg-gray-100 p-2 rounded mt-2",children:null==t||null==(e=t.emailAddresses[0])?void 0:e.emailAddress})]})]})})]}):(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(N,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Sign In to View Balance"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create an account to receive money and track your balance."})]})}):(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6 flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"h-6 w-6 animate-spin"})})})}function k(){var e;let{user:t,isLoaded:s}=(0,r.Jd)(),{getToken:d}=(0,n.d)(),[o,x]=(0,l.useState)([]),[v,b]=(0,l.useState)(!0),[N,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{try{let e=await d(),t=await fetch("".concat("http://localhost:4000","/api/transfers"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch transactions");let s=await t.json();x(s)}catch(e){w("Failed to load transactions"),console.error("Transaction fetch error:",e)}finally{b(!1)}};s&&t?e():s&&b(!1)},[s,t,d]);let k=e=>{switch(e){case"COMPLETED":return(0,a.jsx)(h.A,{className:"h-4 w-4 text-green-500"});case"PROCESSING":case"PENDING_PAYMENT":return(0,a.jsx)(m.A,{className:"h-4 w-4 text-yellow-500"});case"FAILED":return(0,a.jsx)(g.A,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-500"})}},S=e=>{switch(e){case"COMPLETED":return"bg-green-100 text-green-800";case"PROCESSING":case"PENDING_PAYMENT":return"bg-yellow-100 text-yellow-800";case"FAILED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},E=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",t.firstName||(null==(e=t.emailAddresses[0])?void 0:e.emailAddress),"!"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your money transfers and track your account balance."})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(A,{})}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Send Money"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create a new transfer to send money globally."})]}),(0,a.jsx)(y(),{href:"/",children:(0,a.jsxs)(c.$,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"New Transfer"]})})]})})})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Recent Transfers"}),(0,a.jsxs)(u,{variant:"secondary",children:[o.length," total"]})]}),v?(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-8 flex items-center justify-center",children:[(0,a.jsx)(f.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{children:"Loading transactions..."})]})}):N?(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("p",{className:"text-red-600",children:N}),(0,a.jsx)(c.$,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Try Again"})]})}):0===o.length?(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)(j.A,{className:"h-12 w-12 mx-auto"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No transfers yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by creating your first money transfer."}),(0,a.jsx)(y(),{href:"/",children:(0,a.jsxs)(c.$,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"Create Transfer"]})})]})}):(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsx)(i.Zp,{className:"hover:shadow-md transition-shadow",children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[k(e.status),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.amount," ",e.sourceCurrency]}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsxs)("span",{className:"font-semibold",children:[e.recipientAmount," ",e.destCurrency]})]}),e.recipientName&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["To: ",e.recipientName,e.recipientEmail&&" (".concat(e.recipientEmail,")")]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:E(e.createdAt)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(u,{className:S(e.status),children:e.status.replace("_"," ")}),(0,a.jsx)(y(),{href:"/status/".concat(e.id),children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",children:"View Details"})})]})]})})},e.id))})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(i.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Please sign in to access your dashboard."}),(0,a.jsx)(y(),{href:"/auth/sign-in",children:(0,a.jsx)(c.$,{children:"Sign In"})})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin"})})}},7227:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(4568);s(7620);var r=s(9649),n=s(615),l=s(3928);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:n,asChild:c=!1,...d}=e,o=c?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,l.cn)(i({variant:s,size:n,className:t})),...d})}},7277:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8889).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7575:(e,t,s)=>{"use strict";s.d(t,{T5:()=>r.T5,hP:()=>a.hP,nO:()=>r.nO,yC:()=>n});var a=s(7918),r=s(5797);function n(e,t,s){let r=t.path||(null==s?void 0:s.path);return"path"===(t.routing||(null==s?void 0:s.routing)||"path")?r?{...s,...t,routing:"path"}:a.sb.throw((0,a.kd)(e)):t.path?a.sb.throw((0,a.s7)(e)):{...s,...t,path:void 0}}},9208:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=s(1510)._(s(7620)).default.createContext(null)},9369:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8889).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9513:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(8889).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[637,686,807,261,587,315,358],()=>t(3839)),_N_E=e.O()}]);