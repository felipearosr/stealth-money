(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{390:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(4568),r=t(7620),n=t(7807),l=t(6181),c=t(2222),i=t(8229),d=t(7466),o=t(8477),u=t(6682),m=t(3129),x=t(3353),h=t(7227),p=t(2055),f=t(9690),j=t(8276),b=t(2942);function g(){let{user:e,isLoaded:s}=(0,n.Jd)(),{}=(0,l.d)(),t=(0,b.useRouter)(),[g,N]=(0,r.useState)({currentStep:"calculator",transferData:null,recipientUser:null,selectedPaymentMethod:null,transferId:null,completedSteps:[],canGoBack:!1,isLoading:!1,error:null}),y=(0,r.useCallback)(e=>{N(s=>({...s,...e}))},[]),v=(0,r.useCallback)(e=>{y({currentStep:e,canGoBack:"calculator"!==e,error:null})},[y]),k=(0,r.useCallback)(()=>{let e=["calculator","recipient","payment","status"],s=e.indexOf(g.currentStep);s>0?v(e[s-1]):t.push("/dashboard")},[g.currentStep,v,t]),S=(0,r.useCallback)(e=>{N(s=>({...s,completedSteps:s.completedSteps.includes(e)?s.completedSteps:[...s.completedSteps,e]}))},[]),w=(0,r.useCallback)(e=>{y({transferData:{sendAmount:e.sendAmount,receiveAmount:e.receiveAmount,sendCurrency:e.sendCurrency,receiveCurrency:e.receiveCurrency,exchangeRate:e.exchangeRate,fees:e.fees,rateId:e.rateId,rateValidUntil:e.rateValidUntil,calculatorMode:e.calculatorMode,breakdown:e.breakdown,estimatedArrival:e.estimatedArrival},isLoading:!0}),S("calculator"),setTimeout(()=>{y({isLoading:!1}),v("recipient")},500)},[y,S,v]),C=(0,r.useCallback)((e,s)=>{y({recipientUser:e,selectedPaymentMethod:s,isLoading:!0}),S("recipient"),setTimeout(()=>{y({isLoading:!1}),v("payment")},500)},[y,S,v]),P=(0,r.useCallback)(async e=>{S("payment"),y({transferId:e,isLoading:!1}),v("status")},[S,y,v]),A=(0,r.useCallback)(e=>{y({error:e,isLoading:!1})},[y]);return s?e?(0,a.jsx)(m.A,{requireVerification:!1,skipCheckOnPublicPages:!1,blockTransfersUntilVerified:!0,children:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-6",children:[(0,a.jsx)(u.Z,{currentStep:g.currentStep,completedSteps:g.completedSteps,onStepClick:e=>{(g.completedSteps.includes(e)||e===g.currentStep)&&v(e)}}),g.canGoBack&&"status"!==g.currentStep&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsxs)(h.$,{variant:"outline",onClick:k,disabled:g.isLoading,className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),"Back"]})}),g.error&&(0,a.jsx)(x.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsxs)(x.Wu,{className:"py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Error"})]}),(0,a.jsx)("p",{className:"text-red-600 mt-1",children:g.error}),(0,a.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>y({error:null}),className:"mt-2",children:"Dismiss"})]})}),(0,a.jsxs)("div",{className:"relative",children:[g.isLoading&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Processing..."})]})}),(()=>{switch(g.currentStep){case"calculator":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.Zp,{children:(0,a.jsxs)(x.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 text-blue-600"}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Send Money to User"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Send money directly to another registered user. No bank details needed - just search and send!"})]})}),(0,a.jsx)(c.W,{onContinue:w,isNavigating:g.isLoading})]});case"recipient":if(!g.transferData)return(0,a.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,a.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Transfer Data"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the calculator step first."}),(0,a.jsx)(h.$,{onClick:()=>v("calculator"),variant:"outline",children:"Go to Calculator"})]})});return(0,a.jsx)(i.E,{transferData:{sendAmount:g.transferData.sendAmount,receiveAmount:g.transferData.receiveAmount,sendCurrency:g.transferData.sendCurrency,receiveCurrency:g.transferData.receiveCurrency,exchangeRate:g.transferData.exchangeRate,fees:g.transferData.fees},onRecipientSelected:C,onBack:k,currentUserId:null==e?void 0:e.id,isLoading:g.isLoading});case"payment":if(!g.transferData||!g.recipientUser||!g.selectedPaymentMethod)return(0,a.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,a.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Missing Required Data"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"Please complete the previous steps first."}),(0,a.jsx)(h.$,{onClick:()=>v("calculator"),variant:"outline",children:"Start Over"})]})});return(0,a.jsx)(d.d,{transferData:g.transferData,recipientUser:g.recipientUser,selectedPaymentMethod:g.selectedPaymentMethod,onSuccess:P,onBack:k,onError:A,isLoading:g.isLoading});case"status":if(!g.transferId)return(0,a.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,a.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"No Transfer Found"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:"Transfer ID is missing."}),(0,a.jsx)(h.$,{onClick:()=>v("calculator"),variant:"outline",children:"Start New Transfer"})]})});return(0,a.jsx)(o.Y,{transferId:g.transferId,onRefresh:()=>{},autoRefresh:!0});default:return(0,a.jsx)(x.Zp,{className:"w-full max-w-lg mx-auto",children:(0,a.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Unknown Step"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Invalid step: ",g.currentStep]}),(0,a.jsx)(h.$,{onClick:()=>v("calculator"),variant:"outline",children:"Start Over"})]})})}})()]})]})})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)(x.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Please sign in to send money to users."}),(0,a.jsx)(h.$,{onClick:()=>t.push("/auth/sign-in"),children:"Sign In"})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function N(){return"pk_test_c21pbGluZy1waXBlZmlzaC0xNy5jbGVyay5hY2NvdW50cy5kZXYk".includes("placeholder")?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)(x.Zp,{className:"w-full max-w-md",children:(0,a.jsxs)(x.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Configuration Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Authentication is not properly configured. Please set up Clerk authentication to access transfers."}),(0,a.jsx)(h.$,{onClick:()=>window.location.href="/",children:"Go Home"})]})})}):(0,a.jsx)(g,{})}},2942:(e,s,t)=>{"use strict";var a=t(2418);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}}),t.o(a,"useSelectedLayoutSegments")&&t.d(s,{useSelectedLayoutSegments:function(){return a.useSelectedLayoutSegments}})},8699:(e,s,t)=>{Promise.resolve().then(t.bind(t,390))}},e=>{var s=s=>e(e.s=s);e.O(0,[637,686,807,930,7,244,405,222,510,466,229,818,587,315,358],()=>s(8699)),_N_E=e.O()}]);