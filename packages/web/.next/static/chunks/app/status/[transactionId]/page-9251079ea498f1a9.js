(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{1171:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(4568),a=s(2942),n=s(7620),i=s(8686),c=s(8451),l=s(3353),d=s(7227),o=s(9513),u=s(5191),m=s(7469),x=s(9690),h=s(7277);let p=(0,c.c)("pk_test_51RlJ5nCGmh60X4m8qsrnQimLT3EtLlSmBkFIK7LEJA8nfHlrW9dennXCp7Ab8lQmwzKG5fStlBb6AxAHKAGEU0Ck00hK2n5P3z"),f=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch transaction");return e.json()}),g=e=>{let t=[{id:"payment",title:"Payment Received",description:"Your payment has been confirmed",statuses:["PAID","PROCESSING","FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"processing",title:"Processing",description:"We are processing your transfer",statuses:["PROCESSING","FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"blockchain",title:"Funds Released",description:"Funds have been sent to our partner",statuses:["FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"completed",title:"Completed",description:"Transfer completed successfully",statuses:["COMPLETED"]}];return t.map(s=>({...s,completed:s.statuses.includes(e),active:s.statuses.includes(e)&&!t.find(r=>r.statuses.includes(e)&&t.indexOf(r)>t.indexOf(s))}))},v=e=>({PENDING_PAYMENT:{color:"text-yellow-600 bg-yellow-50 border-yellow-200",icon:o.A,message:"Waiting for payment confirmation"},PAID:{color:"text-blue-600 bg-blue-50 border-blue-200",icon:u.A,message:"Payment confirmed, processing transfer"},PROCESSING:{color:"text-blue-600 bg-blue-50 border-blue-200",icon:m.A,message:"Processing your transfer"},FUNDS_SENT_TO_PARTNER:{color:"text-green-600 bg-green-50 border-green-200",icon:u.A,message:"Funds sent to our payout partner"},COMPLETED:{color:"text-green-600 bg-green-50 border-green-200",icon:u.A,message:"Transfer completed successfully"},FAILED:{color:"text-red-600 bg-red-50 border-red-200",icon:x.A,message:"Transfer failed - manual intervention required"}})[e]||{color:"text-gray-600 bg-gray-50 border-gray-200",icon:o.A,message:"Processing..."};function y(){let e=(0,a.useParams)(),t=(0,a.useSearchParams)(),s=e.transactionId,[c,y]=(0,n.useState)(!1),[j,b]=(0,n.useState)("completed"),N=t.get("payment_intent"),w=t.get("payment_intent_client_secret"),S=t.get("redirect_status");(0,n.useEffect)(()=>{(async()=>{if(N&&w&&S){console.log("\uD83D\uDD04 Handling Stripe redirect:",{paymentIntent:N,redirectStatus:S}),b("checking");try{let e=await p;if(!e)throw Error("Stripe not loaded");let{paymentIntent:t,error:s}=await e.retrievePaymentIntent(w);if(s){console.error("❌ Error retrieving payment intent:",s),b("failed");return}"succeeded"===t.status?(console.log("✅ Payment confirmed by Stripe"),b("confirmed")):(console.log("❌ Payment failed or was canceled"),b("failed"))}catch(e){console.error("❌ Error confirming payment:",e),b("failed")}}})()},[N,w,S,s]);let{data:P,error:E,isLoading:A,mutate:k}=(0,i.default)(s?"".concat("http://localhost:4000","/api/transfers/").concat(s):null,f,{refreshInterval:5e3,revalidateOnFocus:!0,revalidateOnReconnect:!0}),_=async()=>{y(!0),await k(),setTimeout(()=>y(!1),1e3)};if(A)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsx)(l.Zp,{className:"w-full max-w-2xl",children:(0,r.jsxs)(l.Wu,{className:"flex items-center justify-center p-8",children:[(0,r.jsx)(m.A,{className:"h-8 w-8 animate-spin mr-3"}),(0,r.jsx)("span",{children:"Loading transfer details..."})]})})});if(E||!P)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,r.jsxs)(l.Zp,{className:"w-full max-w-2xl",children:[(0,r.jsxs)(l.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(x.A,{className:"h-8 w-8 text-red-600"})}),(0,r.jsx)(l.ZB,{className:"text-red-600",children:"Transfer Not Found"})]}),(0,r.jsxs)(l.Wu,{className:"text-center space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-600",children:["We couldn't find a transfer with ID: ",s]}),(0,r.jsx)(d.$,{onClick:()=>window.location.href="/",children:"Start New Transfer"})]})]})});let T=v(P.status),C=g(P.status),R=T.icon;return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 py-8 px-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Transfer Status"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Track your money transfer in real-time"})]}),"confirmed"===j&&(0,r.jsx)(l.Zp,{className:"border-green-200 bg-green-50",children:(0,r.jsxs)(l.Wu,{className:"flex items-center p-4",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-green-800",children:"Payment Confirmed!"}),(0,r.jsx)("div",{className:"text-sm text-green-600",children:"Your payment was successful. Processing your transfer..."})]})]})}),(0,r.jsxs)(l.Zp,{className:"w-full",children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(l.ZB,{className:"text-xl",children:["Sending ",P.amount," ",P.sourceCurrency," → ",P.recipientAmount," ",P.destCurrency]}),(0,r.jsxs)(d.$,{variant:"outline",size:"sm",onClick:_,disabled:c,children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2 ".concat(c?"animate-spin":"")}),"Refresh"]})]})}),(0,r.jsxs)(l.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center p-4 rounded-lg border ".concat(T.color),children:[(0,r.jsx)(R,{className:"h-6 w-6 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:P.status.replace(/_/g," ")}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:T.message})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Progress Timeline"}),(0,r.jsx)("div",{className:"space-y-4",children:C.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mr-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-500 text-white":e.active?"bg-blue-500 text-white animate-pulse":"bg-gray-200 text-gray-400"),children:e.completed?(0,r.jsx)(u.A,{className:"h-4 w-4"}):e.active?(0,r.jsx)(m.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(o.A,{className:"h-4 w-4"})}),t<C.length-1&&(0,r.jsx)("div",{className:"w-0.5 h-8 mt-2 ".concat(e.completed?"bg-green-500":"bg-gray-200")})]}),(0,r.jsxs)("div",{className:"flex-1 pb-8",children:[(0,r.jsx)("div",{className:"font-medium ".concat(e.completed?"text-green-700":e.active?"text-blue-700":"text-gray-500"),children:e.title}),(0,r.jsx)("div",{className:"text-sm ".concat(e.completed?"text-green-600":e.active?"text-blue-600":"text-gray-400"),children:e.description})]})]},e.id))})]}),P.recipientName&&(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-800",children:"Recipient Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-blue-600",children:"Name:"}),(0,r.jsx)("span",{className:"font-medium",children:P.recipientName})]}),P.recipientEmail&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-blue-600",children:"Email:"}),(0,r.jsx)("span",{className:"font-medium",children:P.recipientEmail})]}),P.recipientPhone&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-blue-600",children:"Phone:"}),(0,r.jsx)("span",{className:"font-medium",children:P.recipientPhone})]}),P.payoutMethod&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-blue-600",children:"Payout Method:"}),(0,r.jsx)("span",{className:"font-medium capitalize",children:P.payoutMethod.replace("_"," ")})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Transaction Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,r.jsx)("span",{className:"font-mono text-xs",children:P.id})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Exchange Rate:"}),(0,r.jsxs)("span",{children:["1 ",P.sourceCurrency," = ",parseFloat(P.exchangeRate).toFixed(4)," ",P.destCurrency]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Created:"}),(0,r.jsx)("span",{children:new Date(P.createdAt).toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,r.jsx)("span",{children:new Date(P.updatedAt).toLocaleString()})]})]})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Updates automatically every 5 seconds"]}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:(0,r.jsxs)(d.$,{onClick:()=>window.location.href="/",className:"flex-1",children:["Send Another Transfer",(0,r.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}},2942:(e,t,s)=>{"use strict";var r=s(2418);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}}),s.o(r,"useSelectedLayoutSegments")&&s.d(t,{useSelectedLayoutSegments:function(){return r.useSelectedLayoutSegments}})},3353:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>d});var r=s(4568);s(7620);var a=s(3928);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},3928:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(2987),a=s(607);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},5191:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5554:(e,t,s)=>{Promise.resolve().then(s.bind(s,1171))},7227:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(4568);s(7620);var a=s(9649),n=s(615),i=s(3928);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:s,size:n,asChild:l=!1,...d}=e,o=l?a.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,i.cn)(c({variant:s,size:n,className:t})),...d})}},7277:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8889).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7469:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8889).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8451:(e,t,s)=>{"use strict";s.d(t,{c:()=>v});var r,a="basil",n="https://js.stripe.com",i="".concat(n,"/").concat(a,"/stripe.js"),c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,d=function(){for(var e=document.querySelectorAll('script[src^="'.concat(n,'"]')),t=0;t<e.length;t++){var s,r=e[t];if(s=r.src,c.test(s)||l.test(s))return r}return null},o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(i).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},u=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.5.0",startTime:t})},m=null,x=null,h=null,p=function(e,t,s){if(null===e)return null;var r,n=t[0].match(/^pk_test/),i=3===(r=e.version)?"v3":r;n&&i!==a&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.5.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,t);return u(c,s),c},f=!1,g=function(){return r?r:r=(null!==m?m:(m=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var s,r=d();r?r&&null!==h&&null!==x&&(r.removeEventListener("load",h),r.removeEventListener("error",x),null==(s=r.parentNode)||s.removeChild(r),r=o(null)):r=o(null),h=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},x=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},r.addEventListener("load",h),r.addEventListener("error",x)}catch(e){t(e);return}})).catch(function(e){return m=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)})};Promise.resolve().then(function(){return g()}).catch(function(e){f||console.warn(e)});var v=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];f=!0;var r=Date.now();return g().then(function(e){return p(e,t,r)})}},9513:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8889).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},9690:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(8889).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[637,686,587,315,358],()=>t(5554)),_N_E=e.O()}]);