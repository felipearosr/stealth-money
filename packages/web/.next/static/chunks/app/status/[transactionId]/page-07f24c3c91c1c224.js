(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{1171:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(4568),r=t(2942),n=t(7620),i=t(7359),c=t(8451),l=t(3353),d=t(7227),o=t(9513),m=t(5191),x=t(7469),u=t(9690),h=t(7277);let g=(0,c.c)("pk_test_51RlJ5nCGmh60X4m8qsrnQimLT3EtLlSmBkFIK7LEJA8nfHlrW9dennXCp7Ab8lQmwzKG5fStlBb6AxAHKAGEU0Ck00hK2n5P3z"),f=e=>fetch(e).then(e=>{if(!e.ok)throw Error("Failed to fetch transaction");return e.json()}),p=e=>{let s=[{id:"payment",title:"Payment Received",description:"Your payment has been confirmed",statuses:["PAID","PROCESSING","FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"processing",title:"Processing",description:"We are processing your transfer",statuses:["PROCESSING","FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"blockchain",title:"Funds Released",description:"Funds have been sent to our partner",statuses:["FUNDS_SENT_TO_PARTNER","COMPLETED"]},{id:"completed",title:"Completed",description:"Transfer completed successfully",statuses:["COMPLETED"]}];return s.map(t=>({...t,completed:t.statuses.includes(e),active:t.statuses.includes(e)&&!s.find(a=>a.statuses.includes(e)&&s.indexOf(a)>s.indexOf(t))}))},b=e=>({PENDING_PAYMENT:{color:"text-yellow-600 bg-yellow-50 border-yellow-200",icon:o.A,message:"Waiting for payment confirmation"},PAID:{color:"text-blue-600 bg-blue-50 border-blue-200",icon:m.A,message:"Payment confirmed, processing transfer"},PROCESSING:{color:"text-blue-600 bg-blue-50 border-blue-200",icon:x.A,message:"Processing your transfer"},FUNDS_SENT_TO_PARTNER:{color:"text-green-600 bg-green-50 border-green-200",icon:m.A,message:"Funds sent to our payout partner"},COMPLETED:{color:"text-green-600 bg-green-50 border-green-200",icon:m.A,message:"Transfer completed successfully"},FAILED:{color:"text-red-600 bg-red-50 border-red-200",icon:u.A,message:"Transfer failed - manual intervention required"}})[e]||{color:"text-gray-600 bg-gray-50 border-gray-200",icon:o.A,message:"Processing..."};function N(){let e=(0,r.useParams)(),s=(0,r.useSearchParams)(),t=e.transactionId,[c,N]=(0,n.useState)(!1),[j,v]=(0,n.useState)("completed"),y=s.get("payment_intent"),w=s.get("payment_intent_client_secret"),E=s.get("redirect_status");(0,n.useEffect)(()=>{(async()=>{if(y&&w&&E){console.log("\uD83D\uDD04 Handling Stripe redirect:",{paymentIntent:y,redirectStatus:E}),v("checking");try{let e=await g;if(!e)throw Error("Stripe not loaded");let{paymentIntent:s,error:t}=await e.retrievePaymentIntent(w);if(t){console.error("❌ Error retrieving payment intent:",t),v("failed");return}"succeeded"===s.status?(console.log("✅ Payment confirmed by Stripe"),v("confirmed")):(console.log("❌ Payment failed or was canceled"),v("failed"))}catch(e){console.error("❌ Error confirming payment:",e),v("failed")}}})()},[y,w,E,t]);let{data:P,error:A,isLoading:_,mutate:T}=(0,i.Ay)(t?"".concat("http://localhost:4000","/api/transfers/").concat(t):null,f,{refreshInterval:5e3,revalidateOnFocus:!0,revalidateOnReconnect:!0}),S=async()=>{N(!0),await T(),setTimeout(()=>N(!1),1e3)};if(_)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsx)(l.Zp,{className:"w-full max-w-2xl",children:(0,a.jsxs)(l.Wu,{className:"flex items-center justify-center p-8",children:[(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin mr-3"}),(0,a.jsx)("span",{children:"Loading transfer details..."})]})})});if(A||!P)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:(0,a.jsxs)(l.Zp,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(l.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(u.A,{className:"h-8 w-8 text-red-600"})}),(0,a.jsx)(l.ZB,{className:"text-red-600",children:"Transfer Not Found"})]}),(0,a.jsxs)(l.Wu,{className:"text-center space-y-4",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:["We couldn't find a transfer with ID: ",t]}),(0,a.jsx)(d.$,{onClick:()=>window.location.href="/",children:"Start New Transfer"})]})]})});let k=b(P.status),C=p(P.status),R=k.icon;return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Transfer Status"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track your money transfer in real-time"})]}),"confirmed"===j&&(0,a.jsx)(l.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsxs)(l.Wu,{className:"flex items-center p-4",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-green-800",children:"Payment Confirmed!"}),(0,a.jsx)("div",{className:"text-sm text-green-600",children:"Your payment was successful. Processing your transfer..."})]})]})}),(0,a.jsxs)(l.Zp,{className:"w-full",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"text-xl",children:["Sending ",P.amount," ",P.sourceCurrency," → ",P.recipientAmount," ",P.destCurrency]}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:S,disabled:c,children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2 ".concat(c?"animate-spin":"")}),"Refresh"]})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center p-4 rounded-lg border ".concat(k.color),children:[(0,a.jsx)(R,{className:"h-6 w-6 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:P.status.replace(/_/g," ")}),(0,a.jsx)("div",{className:"text-sm opacity-75",children:k.message})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Progress Timeline"}),(0,a.jsx)("div",{className:"space-y-4",children:C.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center mr-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-500 text-white":e.active?"bg-blue-500 text-white animate-pulse":"bg-gray-200 text-gray-400"),children:e.completed?(0,a.jsx)(m.A,{className:"h-4 w-4"}):e.active?(0,a.jsx)(x.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(o.A,{className:"h-4 w-4"})}),s<C.length-1&&(0,a.jsx)("div",{className:"w-0.5 h-8 mt-2 ".concat(e.completed?"bg-green-500":"bg-gray-200")})]}),(0,a.jsxs)("div",{className:"flex-1 pb-8",children:[(0,a.jsx)("div",{className:"font-medium ".concat(e.completed?"text-green-700":e.active?"text-blue-700":"text-gray-500"),children:e.title}),(0,a.jsx)("div",{className:"text-sm ".concat(e.completed?"text-green-600":e.active?"text-blue-600":"text-gray-400"),children:e.description})]})]},e.id))})]}),P.recipientName&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800",children:"Recipient Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"Name:"}),(0,a.jsx)("span",{className:"font-medium",children:P.recipientName})]}),P.recipientEmail&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"Email:"}),(0,a.jsx)("span",{className:"font-medium",children:P.recipientEmail})]}),P.recipientPhone&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"Phone:"}),(0,a.jsx)("span",{className:"font-medium",children:P.recipientPhone})]}),P.payoutMethod&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"Payout Method:"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:P.payoutMethod.replace("_"," ")})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Transaction Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transaction ID:"}),(0,a.jsx)("span",{className:"font-mono text-xs",children:P.id})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Exchange Rate:"}),(0,a.jsxs)("span",{children:["1 ",P.sourceCurrency," = ",parseFloat(P.exchangeRate).toFixed(4)," ",P.destCurrency]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Created:"}),(0,a.jsx)("span",{children:new Date(P.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,a.jsx)("span",{children:new Date(P.updatedAt).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 inline mr-1"}),"Updates automatically every 5 seconds"]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:(0,a.jsxs)(d.$,{onClick:()=>window.location.href="/",className:"flex-1",children:["Send Another Transfer",(0,a.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})})]})]})]})})}},3353:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>l,ZB:()=>c,Zp:()=>n,aR:()=>i,wL:()=>d});var a=t(4568);t(7620);var r=t(3928);function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},3928:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2987),r=t(607);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},5554:(e,s,t)=>{Promise.resolve().then(t.bind(t,1171))},7227:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var a=t(4568);t(7620);var r=t(9649),n=t(615),i=t(3928);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:s,variant:t,size:n,asChild:l=!1,...d}=e,o=l?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,i.cn)(c({variant:t,size:n,className:s})),...d})}}},e=>{var s=s=>e(e.s=s);e.O(0,[534,580,587,315,358],()=>s(5554)),_N_E=e.O()}]);