"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{7466:(e,a,n)=>{n.d(a,{n:()=>v});var s=n(4568),t=n(7620),c=n(7717),r=n(818),i=n(5945),l=n(9690),d=n(9594),m=n(8521),o=n(9369),x=n(3872),h=n(7227),p=n(3353),u=n(5165),b=n(2555);let j=c.Ik({number:c.Yj().min(13,"Card number must be at least 13 digits").max(19,"Card number cannot exceed 19 digits"),expiryMonth:c.ai().min(1,"Invalid month").max(12,"Invalid month"),expiryYear:c.ai().min(new Date().getFullYear(),"Card has expired").max(new Date().getFullYear()+20,"Invalid year"),cvv:c.Yj().min(3,"CVV must be at least 3 digits").max(4,"CVV cannot exceed 4 digits")}),N=c.Ik({name:c.Yj().min(2,"Name must be at least 2 characters").max(100,"Name cannot exceed 100 characters"),email:c.Yj().email("Invalid email address"),bankAccount:c.Ik({iban:c.Yj().min(15,"IBAN must be at least 15 characters").max(34,"IBAN cannot exceed 34 characters"),bic:c.Yj().min(8,"BIC must be at least 8 characters").max(11,"BIC cannot exceed 11 characters"),bankName:c.Yj().min(2,"Bank name must be at least 2 characters").max(100,"Bank name cannot exceed 100 characters"),accountHolderName:c.Yj().min(2,"Account holder name must be at least 2 characters").max(100,"Account holder name cannot exceed 100 characters"),country:c.eu("DE",{errorMap:()=>({message:"Only German bank accounts are supported"})})})}),g=c.Ik({cardDetails:j,recipientInfo:N});function v(e){let{sendAmount:a,receiveAmount:n,exchangeRate:c,fees:j,rateId:N,onSubmit:v,isLoading:f=!1}=e,[k,y]=(0,t.useState)({number:"",expiryMonth:1,expiryYear:new Date().getFullYear(),cvv:""}),[A,I]=(0,t.useState)({name:"",email:"",bankAccount:{iban:"",bic:"",bankName:"",accountHolderName:"",country:"DE"}}),[D,C]=(0,t.useState)({}),[Y,F]=(0,t.useState)(!1),w=(e,a)=>{y(n=>({...n,[e]:a})),D["cardDetails.".concat(e)]&&C(a=>{let n={...a};return delete n["cardDetails.".concat(e)],n})},S=(e,a)=>{if(e.startsWith("bankAccount.")){let n=e.replace("bankAccount.","");I(e=>({...e,bankAccount:{...e.bankAccount,[n]:a}}))}else I(n=>({...n,[e]:a}));D["recipientInfo.".concat(e)]&&C(a=>{let n={...a};return delete n["recipientInfo.".concat(e)],n})},B=async e=>{e.preventDefault(),C({}),F(!0);try{let e={cardDetails:{...k,number:k.number.replace(/\s/g,"")},recipientInfo:{...A,bankAccount:{...A.bankAccount,iban:A.bankAccount.iban.replace(/\s/g,"")}}};g.parse(e),v(e)}catch(e){if(e instanceof r.G){let a={};e.issues.forEach(e=>{a[e.path.join(".")]=e.message}),C(a)}}finally{F(!1)}},J=a+j;return(0,s.jsxs)(p.Zp,{className:"w-full max-w-2xl mx-auto",children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"Complete Your Transfer"]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"You send:"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",a.toFixed(2)," USD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Fees:"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",j.toFixed(2)," USD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between border-t pt-1 mt-1",children:[(0,s.jsx)("span",{children:"Total to pay:"}),(0,s.jsxs)("span",{className:"font-bold",children:["$",J.toFixed(2)," USD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"Recipient gets:"}),(0,s.jsxs)("span",{className:"font-bold",children:["€",n.toFixed(2)," EUR"]})]})]})]}),(0,s.jsx)(p.Wu,{children:(0,s.jsxs)("form",{onSubmit:B,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Payment Details"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"card-number",children:"Card Number"}),(0,s.jsx)(u.p,{id:"card-number",type:"text",placeholder:"1234 5678 9012 3456",value:(e=>{let a=e.replace(/\s/g,"").replace(/[^0-9]/gi,""),n=a.match(/\d{4,16}/g),s=n&&n[0]||"",t=[];for(let e=0,a=s.length;e<a;e+=4)t.push(s.substring(e,e+4));return t.length?t.join(" "):a})(k.number),onChange:e=>w("number",e.target.value.replace(/\s/g,"")),className:D["cardDetails.number"]?"border-red-500":"",maxLength:19}),D["cardDetails.number"]&&(0,s.jsxs)("p",{className:"text-sm text-red-500 mt-1 flex items-center gap-1",children:[(0,s.jsx)(l.A,{className:"h-3 w-3"}),D["cardDetails.number"]]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"expiry-month",children:"Month"}),(0,s.jsx)(u.p,{id:"expiry-month",type:"number",placeholder:"MM",min:"1",max:"12",value:k.expiryMonth,onChange:e=>w("expiryMonth",parseInt(e.target.value)||1),className:D["cardDetails.expiryMonth"]?"border-red-500":""}),D["cardDetails.expiryMonth"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["cardDetails.expiryMonth"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"expiry-year",children:"Year"}),(0,s.jsx)(u.p,{id:"expiry-year",type:"number",placeholder:"YYYY",min:new Date().getFullYear(),max:new Date().getFullYear()+20,value:k.expiryYear,onChange:e=>w("expiryYear",parseInt(e.target.value)||new Date().getFullYear()),className:D["cardDetails.expiryYear"]?"border-red-500":""}),D["cardDetails.expiryYear"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["cardDetails.expiryYear"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"cvv",children:"CVV"}),(0,s.jsx)(u.p,{id:"cvv",type:"text",placeholder:"123",maxLength:4,value:k.cvv,onChange:e=>w("cvv",e.target.value.replace(/[^0-9]/g,"")),className:D["cardDetails.cvv"]?"border-red-500":""}),D["cardDetails.cvv"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["cardDetails.cvv"]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Recipient Information"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"recipient-name",children:"Full Name"}),(0,s.jsx)(u.p,{id:"recipient-name",type:"text",placeholder:"John Doe",value:A.name,onChange:e=>S("name",e.target.value),className:D["recipientInfo.name"]?"border-red-500":""}),D["recipientInfo.name"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.name"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"recipient-email",children:"Email Address"}),(0,s.jsx)(u.p,{id:"recipient-email",type:"email",placeholder:"john@example.com",value:A.email,onChange:e=>S("email",e.target.value),className:D["recipientInfo.email"]?"border-red-500":""}),D["recipientInfo.email"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.email"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("h3",{className:"font-semibold",children:"Bank Account Details (Germany)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"iban",children:"IBAN"}),(0,s.jsx)(u.p,{id:"iban",type:"text",placeholder:"DE89 3704 0044 0532 0130 00",value:A.bankAccount.iban.replace(/\s/g,"").toUpperCase().replace(/(.{4})/g,"$1 ").trim(),onChange:e=>S("bankAccount.iban",e.target.value.replace(/\s/g,"")),className:D["recipientInfo.bankAccount.iban"]?"border-red-500":""}),D["recipientInfo.bankAccount.iban"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.bankAccount.iban"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"bic",children:"BIC/SWIFT Code"}),(0,s.jsx)(u.p,{id:"bic",type:"text",placeholder:"COBADEFFXXX",value:A.bankAccount.bic,onChange:e=>S("bankAccount.bic",e.target.value.toUpperCase()),className:D["recipientInfo.bankAccount.bic"]?"border-red-500":""}),D["recipientInfo.bankAccount.bic"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.bankAccount.bic"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"bank-name",children:"Bank Name"}),(0,s.jsx)(u.p,{id:"bank-name",type:"text",placeholder:"Deutsche Bank",value:A.bankAccount.bankName,onChange:e=>S("bankAccount.bankName",e.target.value),className:D["recipientInfo.bankAccount.bankName"]?"border-red-500":""}),D["recipientInfo.bankAccount.bankName"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.bankAccount.bankName"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.J,{htmlFor:"account-holder",children:"Account Holder Name"}),(0,s.jsx)(u.p,{id:"account-holder",type:"text",placeholder:"John Doe",value:A.bankAccount.accountHolderName,onChange:e=>S("bankAccount.accountHolderName",e.target.value),className:D["recipientInfo.bankAccount.accountHolderName"]?"border-red-500":""}),D["recipientInfo.bankAccount.accountHolderName"]&&(0,s.jsx)("p",{className:"text-sm text-red-500 mt-1",children:D["recipientInfo.bankAccount.accountHolderName"]})]})]})]}),(0,s.jsx)(h.$,{type:"submit",disabled:f||Y,className:"w-full",size:"lg",children:f||Y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Transfer..."]}):"Send ".concat(a.toFixed(2)," USD")}),(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground",children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Secured by Circle • PCI DSS Compliant"})]})]})})]})}}}]);