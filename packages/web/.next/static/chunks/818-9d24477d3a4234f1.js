"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{6682:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(4568),l=t(8421),n=t(9594),r=t(5945),c=t(5191);let i=[{key:"calculator",label:"Calculate",shortLabel:"Calc",icon:l.A,description:"Enter transfer amount"},{key:"recipient",label:"Recipient",shortLabel:"Recipient",icon:n.A,description:"Add recipient details"},{key:"payment",label:"Payment",shortLabel:"Pay",icon:r.A,description:"Complete payment"},{key:"status",label:"Status",shortLabel:"Status",icon:c.A,description:"Track transfer"}];function d(e){var s;let{currentStep:t,completedSteps:l,onStepClick:n}=e,r=i.findIndex(e=>e.key===t),d=(e,s)=>l.includes(e.key)?"completed":e.key===t?"current":s<r?"completed":"upcoming",o=(e,s)=>{let t="relative flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-200",a=s?"cursor-pointer hover:scale-105":"";switch(e){case"completed":return"".concat(t," ").concat(a," bg-green-500 border-green-500 text-white");case"current":return"".concat(t," ").concat(a," bg-blue-500 border-blue-500 text-white ring-4 ring-blue-100");default:return"".concat(t," bg-gray-100 border-gray-300 text-gray-400")}},m=e=>{let s=e<r||l.includes(i[e].key);return"flex-1 h-0.5 mx-2 transition-colors duration-300 ".concat(s?"bg-green-500":"bg-gray-300")},x=e=>{n&&(l.includes(e.key)||e.key===t)&&n(e.key)};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:i.map((e,s)=>{let n=d(e,s),r=l.includes(e.key)||e.key===t,u=e.icon;return(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:o(n,r),onClick:()=>x(e),role:r?"button":void 0,tabIndex:r?0:void 0,onKeyDown:s=>{r&&("Enter"===s.key||" "===s.key)&&(s.preventDefault(),x(e))},children:"completed"===n?(0,a.jsx)(c.A,{className:"w-5 h-5"}):(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"mt-2 text-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium ".concat("current"===n?"text-blue-600":"completed"===n?"text-green-600":"text-gray-500"),children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.description})]})]}),s<i.length-1&&(0,a.jsx)("div",{className:m(s)})]},e.key)})})}),(0,a.jsxs)("div",{className:"md:hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:i.map((e,s)=>{let n=d(e,s),m=l.includes(e.key)||e.key===t,u=e.icon;return(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:o(n,m),onClick:()=>x(e),role:m?"button":void 0,tabIndex:m?0:void 0,onKeyDown:s=>{m&&("Enter"===s.key||" "===s.key)&&(s.preventDefault(),x(e))},children:"completed"===n?(0,a.jsx)(c.A,{className:"w-4 h-4"}):(0,a.jsx)(u,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"mt-1 text-center",children:(0,a.jsx)("div",{className:"text-xs font-medium ".concat("current"===n?"text-blue-600":"completed"===n?"text-green-600":"text-gray-500"),children:e.shortLabel})})]}),s<i.length-1&&(0,a.jsx)("div",{className:"flex-1 h-0.5 mx-1 ".concat(s<r||l.includes(i[s].key)?"bg-green-500":"bg-gray-300")})]},e.key)})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",r+1," of ",i.length,": ",null==(s=i[r])?void 0:s.description]})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[Math.round((r+1)/i.length*100),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"".concat((r+1)/i.length*100,"%")}})})]})]})}},8477:(e,s,t)=>{t.d(s,{Y:()=>x});var a=t(4568),l=t(7620),n=t(9513),r=t(7469),c=t(7277),i=t(5191),d=t(9690),o=t(3353),m=t(7227);function x(e){let{transferId:s,onRefresh:t,autoRefresh:x=!0,refreshInterval:u=5e3}=e,[h,g]=(0,l.useState)(null),[f,p]=(0,l.useState)(!0),[b,j]=(0,l.useState)(null),[N,y]=(0,l.useState)(new Date),[v,w]=(0,l.useState)(!1),k=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{e&&p(!0),j(null);let t=await fetch("".concat("http://localhost:4000","/api/transfers/").concat(s,"/status"));if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||"Failed to fetch transfer status")}let a=await t.json();g(a),y(new Date),w(!0)}catch(e){console.error("Transfer status fetch error:",e),j(e instanceof Error?e.message:"Failed to fetch transfer status"),w(!1)}finally{e&&p(!1)}},A=()=>{k(!0),t&&t()};(0,l.useEffect)(()=>{k(!0)},[s]),(0,l.useEffect)(()=>{if(x&&h&&"completed"!==h.status&&"failed"!==h.status){let e=setInterval(()=>{k(!1)},u);return()=>clearInterval(e)}},[x,u,null==h?void 0:h.status]);let C=(e,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),_=e=>new Date(e).toLocaleString(),D=e=>{switch(e){case"success":return{color:"text-green-600",icon:i.A};case"pending":return{color:"text-yellow-600",icon:n.A};case"failed":return{color:"text-red-600",icon:d.A};default:return{color:"text-gray-600",icon:n.A}}};if(f&&!h)return(0,a.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,a.jsxs)(o.Wu,{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(r.A,{className:"h-6 w-6 animate-spin text-muted-foreground mr-2"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Loading transfer status..."})]})});if(b&&!h)return(0,a.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,a.jsx)(o.Wu,{className:"py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Error Loading Transfer"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:b}),(0,a.jsxs)(m.$,{onClick:A,variant:"outline",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})});if(!h)return(0,a.jsx)(o.Zp,{className:"w-full max-w-2xl mx-auto",children:(0,a.jsx)(o.Wu,{className:"py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Transfer Not Found"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["No transfer data available for ID: ",s]})]})})});let S=(e=>{switch(e){case"initiated":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.A,label:"Initiated"};case"payment_processing":return{color:"text-yellow-600",bgColor:"bg-yellow-50",icon:r.A,label:"Processing Payment"};case"transferring":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:c.A,label:"Transferring"};case"paying_out":return{color:"text-purple-600",bgColor:"bg-purple-50",icon:r.A,label:"Paying Out"};case"completed":return{color:"text-green-600",bgColor:"bg-green-50",icon:i.A,label:"Completed"};case"failed":return{color:"text-red-600",bgColor:"bg-red-50",icon:d.A,label:"Failed"};case"chilean_bank_processing":return{color:"text-blue-600",bgColor:"bg-blue-50",icon:r.A,label:"Processing Chilean Bank Transfer"};case"chilean_verification_pending":return{color:"text-yellow-600",bgColor:"bg-yellow-50",icon:n.A,label:"Awaiting Bank Verification"};case"chilean_microdeposit_sent":return{color:"text-purple-600",bgColor:"bg-purple-50",icon:c.A,label:"Microdeposits Sent"};default:return{color:"text-gray-600",bgColor:"bg-gray-50",icon:n.A,label:"Unknown"}}})(h.status),E=S.icon,I=(e=>{switch(e){case"initiated":return 20;case"payment_processing":return 40;case"transferring":return 60;case"paying_out":return 80;case"completed":return 100;case"failed":default:return 0;case"chilean_bank_processing":return 50;case"chilean_verification_pending":return 30;case"chilean_microdeposit_sent":return 70}})(h.status);return(0,a.jsxs)(o.Zp,{className:"w-full max-w-2xl mx-auto shadow-sm",children:[(0,a.jsxs)(o.aR,{className:"pb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)(E,{className:"h-5 w-5 ".concat(S.color)}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Transfer Status"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Status"})]}),(0,a.jsxs)(m.$,{onClick:A,variant:"outline",size:"sm",disabled:f,className:"self-start sm:self-auto",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2 ".concat(f?"animate-spin":"")}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Refresh"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Update"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground break-all sm:break-normal",children:["ID: ",h.transferId]})]}),(0,a.jsxs)(o.Wu,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"rounded-lg p-4 ".concat(S.bgColor),children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(E,{className:"h-6 w-6 ".concat(S.color)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold ".concat(S.color),children:S.label}),h.estimatedCompletion&&"completed"!==h.status&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Estimated completion: ",_(h.estimatedCompletion)]}),h.completedAt&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Completed: ",_(h.completedAt)]})]})]})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[I,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat("failed"===h.status?"bg-red-500":"bg-blue-500"),style:{width:"".concat(I,"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"You sent"}),(0,a.jsx)("p",{className:"font-semibold",children:C(h.sendAmount,h.sendCurrency||"USD")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recipient gets"}),(0,a.jsx)("p",{className:"font-semibold text-green-600",children:C(h.receiveAmount,h.receiveCurrency||"EUR")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Exchange rate"}),(0,a.jsx)("p",{className:"font-semibold",children:h.sendCurrency===h.receiveCurrency?"1:1 (Same currency)":"1 ".concat(h.sendCurrency||"USD"," = ").concat(h.exchangeRate.toFixed(4)," ").concat(h.receiveCurrency||"EUR")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fees"}),(0,a.jsx)("p",{className:"font-semibold",children:C(h.fees,h.sendCurrency||"USD")})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Timeline"}),v&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live updates"]})]}),(0,a.jsx)("div",{className:"relative",children:0===h.timeline.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No timeline events yet"})]}):(0,a.jsx)("div",{className:"space-y-4",children:h.timeline.map((e,s)=>{let t=D(e.status),l=t.icon,n=s===h.timeline.length-1,r=new Date(e.timestamp)>new Date(Date.now()-3e5);return(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg transition-all duration-300 ".concat(r?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex flex-col items-center relative",children:[(0,a.jsx)("div",{className:"p-1 rounded-full ".concat("success"===e.status?"bg-green-100":"pending"===e.status?"bg-yellow-100":"bg-red-100"),children:(0,a.jsx)(l,{className:"h-4 w-4 ".concat(t.color)})}),!n&&(0,a.jsx)("div",{className:"w-px h-8 mt-2 ".concat("success"===e.status?"bg-green-300":"bg-gray-300")})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm sm:text-base",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"New"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:_(e.timestamp)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("p",{className:"text-xs capitalize font-medium ".concat(t.color),children:e.status}),e.metadata&&Object.keys(e.metadata).length>0&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"• Additional details available"})]})]})]},e.id)})})})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center border-t pt-4",children:["Last updated: ",_(h.lastUpdated),x&&"completed"!==h.status&&"failed"!==h.status&&(0,a.jsxs)("span",{className:"ml-2",children:["• Auto-refreshing every ",u/1e3,"s"]})]})]})]})}}}]);